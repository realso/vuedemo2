webpackJsonp([4],{"17H+":function(t,e){},FU2c:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("4YfN"),n=a.n(r),s=a("y1V+"),i=a("JIbx"),T={props:{item:Object},computed:n()({},Object(s.b)("DTS",["ITEMID","STLITEMID_GRPID","AMT","STLITEMID_PARANAME","ITEMID_PARANAME","ISSHOW","DEALTYPE","STLITEMID_ISLBSHOW","STLITEMID_ISLBB","STLITEMID_LBCOLOR","STLITEMID_LBUNDERLINE","STLITEMID_PNCOLOR","STLITEMID_ZEROCOLOR","STLITEMID_NNCOLOR","STLITEMID_ISPN","STLITEMID_ISZERO","STLITEMID_ISNULLF","STLITEMID_ISNN"],"item")),watch:{AMT:function(){this.$store.commit(s.a.STORE_NAME+"/setRejectAMT",{item:this.item}),this.$store.commit(s.a.STORE_NAME+"/setAMT")}},filters:{toFixed:function(t,e){if("0"==t||""!=t)return parseFloat(t||0).toFixed(e)}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1==t.ISSHOW?a("rs-list-item",{class:{"rr-border":"LongBlack"==t.STLITEMID_LBUNDERLINE},attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[1==t.STLITEMID_ISLBSHOW?a("div",{staticClass:"rr-width-5em",class:{"rr-weight":1==t.STLITEMID_ISLBB},style:{color:t.STLITEMID_LBCOLOR}},[t._v("\n      "+t._s(t.ITEMID_PARANAME)+"\n    ")]):t._e(),t._v(" "),a("div",{staticClass:"rs-flex-item rr-text-right",class:{"rr-line-b":"ShortGrey"==t.STLITEMID_LBUNDERLINE},style:{color:parseFloat(t.AMT)>0?t.STLITEMID_PNCOLOR:parseFloat(t.AMT)<0?t.STLITEMID_NNCOLOR:t.STLITEMID_ZEROCOLOR}},["Count"==t.DEALTYPE?a("div",[t._v(t._s(t._f("toFixed")(t.AMT,2)))]):t._e(),t._v(" "),"Write"==t.DEALTYPE?a("rs-numInput",{staticClass:"rs-flex-item",attrs:{height:"24",size:"14",text:t._f("toFixed")(t.AMT,2)},model:{value:t.AMT,callback:function(e){t.AMT=e},expression:"AMT"}}):t._e()],1)])]):t._e()},staticRenderFns:[]};var c={props:{TITLE:""},name:"jiesuan",data:function(){return{ISINPUTSHOW:!1,length:parseInt(this.$route.query.length),index:parseInt(this.$route.query.index)}},components:{main_dts:a("C7Lr")(T,E,!1,function(t){a("hcV2")},"data-v-e5a13b8c",null).exports},computed:n()({},Object(s.c)(["ISSHOWSAVE","ISSHOWDELETE","ISTIME"]),Object(s.b)("MAIN",["BILLTYPEID","BILLDATE","BILLCODE","SNODEID.SNODECODE","SNODEID.SNODENAME","MANAGER","DIFFREMARK","MAKER","VERIFIER","MAKEDATE","VERIFYDATE","TALLIER","TALLYDATE","FHOUR","FMINUTE","DEADLINE"]),Object(s.b)("DTS",[]),{firstIndex:function(){return 0!=this.index?this.index:-1},preIndex:function(){return this.index-1>=0?this.index-1:-1},nextIndex:function(){return this.index+1<=this.length-1?this.index+1:-1},endIndex:function(){return this.index!=this.length-1?this.index:-1}}),methods:{more_first:function(){-1!=this.firstIndex&&(this.index=0,this.doquery())},more_pre:function(){-1!=this.preIndex&&(this.index=this.index-1,this.doquery())},more_next:function(){-1!=this.nextIndex&&(this.index=this.index+1,this.doquery())},more_end:function(){-1!=this.endIndex&&(this.index=this.length-1,this.doquery())},doquery:function(t){this.$router.push({path:"/jiesuan1/detail/main",query:{index:this.index}})}},watch:{DEADLINE:function(){this.$store.commit(s.a.STORE_NAME+"/"+s.a.M_SETDEADLINE)}},activated:function(){console.log("%c"+this.$route.path,"color:red")},filters:{getWeek:function(t){return t?t+" "+Object(i.e)(t):""}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-layout mui-layout-top"},[a("rs-header",{attrs:{title:t.TITLE,color:"primary"}},[a("a",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"})]),t._v(" "),a("div",{staticClass:"rs-nex-prev"},[a("span",{staticClass:"rr-left rr-font rr-prevA",class:-1!=t.firstIndex?"c-active":"c-999",on:{click:t.more_first}}),t._v(" "),a("span",{staticClass:"rr-left rr-font rr-prev",class:-1!=t.preIndex?"c-active":"c-999",on:{click:t.more_pre}}),t._v(" "),a("span",{staticClass:"rr-right rr-font rr-nextA",class:-1!=t.endIndex?"c-active":"c-999",on:{click:t.more_end}}),t._v(" "),a("span",{staticClass:"rr-right rr-font rr-next",class:-1!=t.nextIndex?"c-active":"c-999",on:{click:t.more_next}})]),t._v(" "),a("div",{staticClass:"mui-content bk-fff"},[a("rs-list",{staticClass:"rr-line-24",attrs:{size:"15",noborder:""}},[a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("经 营 门 店")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-line-b"},[t._v("\n               index:"+t._s(t.index)+"length:"+t._s(t.length)+" "+t._s(this["SNODEID.SNODECODE"])+" "+t._s(this["SNODEID.SNODENAME"])+"\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("日 期")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-line-b"},[t._v("\n                "+t._s(t._f("getWeek")(t.BILLDATE))+"\n            ")])])])],1),t._v(" "),t._m(0)],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-content-padded"},[a("table",{staticClass:"rr-table"},[a("thead",{staticClass:"rr-table-header"},[a("tr",[a("td",[t._v("项目")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("10:00")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("12:00")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("全天")])])]),t._v(" "),a("tbody",{staticClass:"rr-table-body"},[a("tr",[a("td",[t._v("实际收入")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("10.02")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("12")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("22.02")])])])]),t._v(" "),a("div",{staticStyle:{height:"5px",background:"#eee"}}),t._v(" "),a("table",{staticClass:"rr-table"},[a("tbody",{staticClass:"rr-table-body"},[a("tr",[a("td",[t._v("实际收入")]),t._v(" "),a("td",{staticClass:"rr-table-w4em rr-text-right"},[t._v("10.02")]),t._v(" "),a("td",{staticClass:"rr-table-w4em rr-text-right"},[t._v("12")]),t._v(" "),a("td",{staticClass:"rr-table-w4em rr-text-right"},[t._v("22.02")])])])]),t._v(" "),a("div",{staticStyle:{height:"5px",background:"#eee"}}),t._v(" "),a("table",{staticClass:"rr-table"},[a("tbody",{staticClass:"rr-table-body"},[a("tr",[a("td",[t._v("店长")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("张三")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("张三")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("张三")])]),t._v(" "),a("tr",[a("td",[t._v("单据号")]),t._v(" "),a("td",[t._v("BILLCODE")]),t._v(" "),a("td",[t._v("DJ-10290-1029")]),t._v(" "),a("td",[t._v("DJ-10290-1029")])]),t._v(" "),a("tr",[a("td",[t._v("填报人")]),t._v(" "),a("td",[t._v("张三")]),t._v(" "),a("td",[t._v("张三")]),t._v(" "),a("td",[t._v("张三")])]),t._v(" "),a("tr",[a("td",[t._v("填报时间")]),t._v(" "),a("td",[t._v("2018-12-05 星期三")]),t._v(" "),a("td",[t._v("2018-12-05 星期三")]),t._v(" "),a("td",[t._v("2018-12-05 星期三")])]),t._v(" "),a("tr",[a("td",[t._v("审核人")]),t._v(" "),a("td",[t._v("张三")]),t._v(" "),a("td",[t._v("张三")]),t._v(" "),a("td",[t._v("张三")])]),t._v(" "),a("tr",[a("td",[t._v("审核时间")]),t._v(" "),a("td",[t._v("2018-12-05 星期三")]),t._v(" "),a("td",[t._v("2018-12-05 星期三")]),t._v(" "),a("td",[t._v("2018-12-05 星期三")])])])])])}]};var I=a("C7Lr")(c,o,!1,function(t){a("hKqK")},"data-v-6c9a4c79",null);e.default=I.exports},YTJj:function(t,e,a){"use strict";e.__esModule=!0,e.default=function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}},dgzW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("y1V+"),n={data:function(){return{transitionName:"slide-left"}},activated:function(){this.$store.commit(r.a.STORE_NAME+"/setParams",this.$route.query),this.$callAction({action:r.a.STORE_NAME+"/open",param:this.$route.query,isErrorBack:!0,timeOut:600})},deactivated:function(){this.$destroy()},beforeRouteUpdate:function(t,e,a){var r=this.$router.isBack;this.transitionName=r?"slide-right":"slide-left",this.$router.isBack=!1,a()}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%"}},[e("transition",{attrs:{name:this.transitionName}},[e("keep-alive",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(n,s,!1,function(t){a("17H+")},null,null);e.default=i.exports},giHQ:function(t,e){},hKqK:function(t,e){},hcV2:function(t,e){},uNdK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),n=a.n(r),s=a("J0Oq"),i=a.n(s),T=a("4YfN"),E=a.n(T),c=a("y1V+"),o=a("JIbx"),I={props:{TITLE:""},name:"jiesuan",data:function(){return{ISINPUTSHOW:!1}},computed:E()({},Object(c.c)(["ISSHOWSAVE","ISSHOWDELETE","ISTIME"]),Object(c.b)("MAIN",["BILLTYPEID","BILLDATE","BILLCODE","SNODEID.SNODECODE","SNODEID.SNODENAME","MANAGER","DIFFREMARK","MAKER","VERIFIER","MAKEDATE","VERIFYDATE","TALLIER","TALLYDATE","FHOUR","FMINUTE","DEADLINE"]),Object(c.b)("DTS",[]),Object(c.b)("QRY",[]),{length:function(){return this.QRY.length}}),methods:{linkUrl:function(t){this.$router.push({path:"/dongtai/detail/"+t})},linkUrl1:function(t,e){this.$router.push({path:"/dongtai/detail/detail",query:{SNODEID:t,index:e,length:this.length}})},open:function(t){this.$refs[t].open()},handleChangeD:function(){this.$callAction({action:c.a.STORE_NAME+"/loadSTLFMITE"})},save:function(){this.$callAction({action:c.a.STORE_NAME+"/mySave",successText:"保存成功"})},del:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("确认删除？");case 2:t.$callAction({action:c.a.STORE_NAME+"/delete",successText:"删除成功",isSuccessBack:!0});case 3:case"end":return e.stop()}},e,t)}))()}},watch:{DEADLINE:function(){this.$store.commit(c.a.STORE_NAME+"/"+c.a.M_SETDEADLINE)}},activated:function(){console.log("%c"+this.$route.path,"color:red"),this.$store.dispatch(c.a.STORE_NAME+"/setForm")},filters:{getWeek:function(t){return t?t+" "+Object(o.e)(t):""}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-layout mui-layout-top"},[a("rs-header",{attrs:{title:t.TITLE,color:"primary"}},[a("a",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"})]),t._v(" "),a("div",{staticClass:"mui-content bk-fff"},[a("rs-list",{staticClass:"rr-line-24",attrs:{size:"15",noborder:""}},[a("rs-list-item",{attrs:{noborder:"",isright:""},nativeOn:{click:function(e){t.open("picker2")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("日 期")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-line-b"},[t._v("\n                "+t._s(t._f("getWeek")(t.BILLDATE))+"\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:"",isright:""},nativeOn:{click:function(e){t.linkUrl("snodesel")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("经营门店")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                "+t._s(this["QRYSNODEID.SNODECODE"])+" "+t._s(this["QRYSNODEID.SNODENAME"])+"\n            ")])])])],1),t._v(" "),a("rs-datetime",{key:"jiesuan1.1",ref:"picker2",attrs:{type:"date"},on:{confirm:t.handleChangeD},model:{value:t.BILLDATE,callback:function(e){t.BILLDATE=e},expression:"BILLDATE"}}),t._v(" "),a("div",{staticClass:"mui-content-padded"},[a("table",{staticClass:"rr-table"},[t._m(0),t._v(" "),a("tbody",{staticClass:"rr-table-body"},[t._l(t.QRY,function(e,r){return a("tr",{key:r,on:{click:function(a){t.linkUrl1(e.SNODEID,r)}}},[a("td",[t._v(t._s(e.SNODECODE)),a("br"),t._v(t._s(e.SNODENAME))]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v(t._s(e.SNODEID))]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v(t._s(e.ONLINEAMT)),a("br"),t._v(t._s(e.ONLINERATE)+"%")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v(t._s(e.OFFLINEAMT)),a("br"),t._v(t._s(e.OFFLINERATE)+"%")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v(t._s(e.SNODEID)),a("br"),t._v(t._s(e.SNODEID)+"%")])])}),t._v(" "),t._m(1)],2)])])],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"rr-table-header"},[a("tr",[a("td",[t._v("经营门店")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("实际收入")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("线下"),a("br"),t._v("占比%")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("线上"),a("br"),t._v("占比%")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("差异"),a("br"),t._v("差异%")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"rr-table-heji"},[a("td",{staticClass:"rr-text-right rr-weight"},[t._v("合计:")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("30.1")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("20"),a("br"),t._v("2.09%")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("9"),a("br"),t._v("2.09%")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("1.1"),a("br"),t._v("2.09%")])])}]};var D=a("C7Lr")(I,u,!1,function(t){a("giHQ")},"data-v-72282a4a",null);e.default=D.exports},"y1V+":function(t,e,a){"use strict";var r=a("lC5x"),n=a.n(r),s=a("rVsN"),i=a.n(s),T=a("J0Oq"),E=a.n(T),c=a("a3Yh"),o=a.n(c),I=a("ZLEe"),u=a.n(I),D=a("4YfN"),l=a.n(D),S=a("aA9S"),d=a.n(S),_=a("+9g/"),M=a("IcnI"),f=a("9rMa"),v=a("YTJj"),L=a.n(v),A=a("vNGi");Object(A.f)(_.a);var h,N,p,O,m,b=function(t,e){return{modalName:"TBV_STLFMITEM",where:"[STLFMID] = (SELECT STLFMID FROM VBV_STLFM_REF WHERE  ISVERIFY = 1 AND STLTYPEID ='"+t+"' AND TO_DATE('"+e+"','YYYY-MM-DD') BETWEEN SDATE AND NVL (EDATE,TO_DATE('2099-12-31','YYYY-MM-DD')))",orderBy:"[ENTRYNUM]",pageSize:1,pageIndex:1}},R=function(t,e){return{modalName:"TBV_SNSTLDTS_M",where:"[BILLID] IN (SELECT * FROM (SELECT BILLID FROM TBV_SNSTL WHERE AID = @AID AND SNODEID = '"+t+"' AND STLFMID = '"+e+"' AND NVL(ISDEL,0) = 0  ORDER BY  BILLDATE,FHOUR,FMINUTE DESC) WHERE  ROWNUM <2  )",orderBy:"",pageSize:1,pageIndex:1}},C=(h=E()(n.a.mark(function t(e){var a=e.DSNODEID,r=e.STLFMID;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.a.open(R(a,r)));case 1:case"end":return t.stop()}},t,this)})),function(t){return h.apply(this,arguments)}),g=(N=E()(n.a.mark(function t(e){var a=e.STLTYPEID,r=e.BILLDATE;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.a.open(b(a,r)));case 1:case"end":return t.stop()}},t,this)})),function(t){return N.apply(this,arguments)}),x=(p=E()(n.a.mark(function t(e){var a=e.SNODEID;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.a.open({modalName:"TBV_CHAINSND_SEL",where:"[SNODEID] ='"+a+"'",orderBy:"",pageSize:1,pageIndex:1}));case 1:case"end":return t.stop()}},t,this)})),function(t){return p.apply(this,arguments)}),F=(O=E()(n.a.mark(function t(e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return L()(e),t.abrupt("return",_.a.open());case 2:case"end":return t.stop()}},t,this)})),{doLoadCOPYDTS:C,doLoadSTLFMITE:g,doLoadSnode:x,doOpen:A.c,doSave:A.e,doDelete:A.b,doCheck:A.a,doReCheck:A.d}),V=a("78rJ"),B=a("JIbx"),P=a("aP4p");a.d(e,"c",function(){return w}),a.d(e,"b",function(){return q}),a.d(e,"a",function(){return Y});var Y=d()({},V.a,{STORE_NAME:"jiesuan1",M_ADDDEFAULT:"addDefault",M_SETDTS01:"setDts01",M_SETDTS02:"setDts02",M_SETDTS03:"setDts03",M_SETDTS04:"setDts04",M_SETDTS05:"setDts05",M_SETAMT:"setAMT",M_SETEMP:"setEmp",M_SETSNODE:"setSnode",M_SETSETDTS:"setSetDTS",M_SETDTSISDELBYU:"setDTSISDELBYU",M_SETREJECTAMT:"setRejectAMT",M_SETDEADLINE:"setDEADLINE",M_SETFORM:"setForm"}),y=Object(f.a)(Y.STORE_NAME),w=(y.mapState,y.mapGetters),j=new V.b({service:F,paths:{QRY:"TBS_PARAMETER_REF",MAIN:"TBV_SNSTL_M",DTS:"TBV_SNSTLDTS_M",SETDTS:"TBV_SNSTLDTS_M",STLFMITEM:"TBV_STLFMITEM",COPYDTS:"TBV_SNSTLDTS_M",SNODE:"TBV_CHAINSND_SEL"},MAINPATH:"MAIN",SUBPATH:["DTS"],XULID:"0000051437",OPRTFLOWID:"30307",EMPFIELD:"MANAGERID"}),k=l()({params:{ACTION:"",STLTYPEID:"",BILLTYPEID:""}},j.mixState()),U=l()({},j.mixMutations(),(m={},o()(m,Y.M_SETPARAMS,function(t,e){t.params=e,"109303"==t.params.BILLTYPEID&&j.setConfig({XULID:"0000051437",OPRTFLOWID:"30307"}),"109304"==t.params.BILLTYPEID&&j.setConfig({XULID:"0000051465",OPRTFLOWID:"30244"})}),o()(m,Y.M_SETFORM,function(t){var e=t.commit,a={};this.getters.userInfo.DSNODEID;a.BILLID="",a.BILLDATE=Object(B.c)(new Date),a.sqlId="51485",a.pageSize="10",a.keyFields="BILLID",_.a.open(a).then(function(t){e(Y.M_INITDATA,{path:"QRY",data:(t.data||{}).items})})}),o()(m,Y.M_ADDDEFAULT,function(t){var e=j.getTable("MAIN"),a=j.getTable("STLFMITEM");e.add({}),e.setValue("AID",this.getters.userInfo.AID),e.setValue("BILLTYPEID",t.params.BILLTYPEID),e.setValue("SNODEID",this.getters.userInfo.DSNODEID),e.setValue("SNODEID.SNODECODE",this.getters.userInfo.DSNODECODE),e.setValue("SNODEID.SNODENAME",this.getters.userInfo.DSNODENAME),e.setValue("MANAGERID",this.getters.userInfo.EMPID),e.setValue("MANAGER",this.getters.userInfo.EMPNAME),e.setValue("BILLDATE",Object(B.c)(new Date)),e.setValue("STLFMID",a.getValue("STLFMID")),e.setValue("STLFMCODE",a.getValue("STLFMCODE")),this.getters[Y.STORE_NAME+"/ISTIME"]&&e.setValue("DEADLINE",Object(B.d)(new Date))}),o()(m,Y.M_SETDEADLINE,function(t){var e=j.getTable("MAIN"),a=e.getValue("DEADLINE"),r="",n="";a&&(r=a.split(":")[0],n=a.split(":")[1]),e.setValue("FHOUR",r),e.setValue("FMINUTE",n)}),o()(m,Y.M_SETDTS01,function(t){var e=j.getTable("MAIN"),a=j.getTable("STLFMITEM"),r=j.getTable("DTS");r.clear(),a.data.forEach(function(t){var e={};e.ITEMID=t.ITEMID,e["ITEMID.PARANAME"]=t["ITEMID.PARANAME"],e.STLITEMID=t.STLITEMID,u()(t).forEach(function(a){e["STLITEMID."+a]=t[a]}),e.DEALTYPE=t.DEALTYPE,r.add(e)}),"1"!=e.getValue("SNODEID.ISREADSTL")&&r.data.map(function(t){"EDI"==t.DEALTYPE&&r.setValue("DEALTYPE","Write",t)})}),o()(m,Y.M_SETDTS02,function(t){var e=j.getTable("COPYDTS"),a=j.getTable("DTS");a.data.forEach(function(t){if(a.setValue("ISDELBYU",0,t),"select"==t["STLITEMID.ITEMPROPERTY"]){var r=e.data.find(function(e){return e.STLITEMID==t.STLITEMID});r&&a.setValue("ISDELBYU",r.ISDELBYU,t)}})}),o()(m,Y.M_SETDTS03,function(t){var e=j.getTable("DTS");e.data.forEach(function(t){var a=t["STLITEMID.ITEMPROPERTY"],r=t.ISDELBYU,n=1;"fixed"==a&&(n=1),"select"==a&&"1"==r&&(n=0),"hide"==a&&(n=0),e.setValue("ISSHOW",n,t)}),e.data.forEach(function(t){var a=0;"judge"==t["STLITEMID.ITEMPROPERTY"]&&(e.data.find(function(e){return e["STLITEMID.GRPID"]==t.ITEMID&&1==e.ISSHOW&&e.ITEMID!=e["STLITEMID.GRPID"]})&&(a=1),e.setValue("ISSHOW",a,t))})}),o()(m,Y.M_SETDTS04,function(t){var e=j.getTable("DTS"),a=1;e.data.sort(function(t,e){return parseFloat(t["STLITEMID.ENTRYNUM"])-parseFloat(e["STLITEMID.ENTRYNUM"])}).forEach(function(t){e.setValue("ENTRYNUM","",t),1==t.ISSHOW&&e.setValue("ENTRYNUM",a++,t)})}),o()(m,Y.M_SETDTS05,function(t){var e=j.getTable("DTS");e.data.forEach(function(t){var a="";a="1"==t.ISDELBYU?"":t.AMT||t["STLITEMID.DEFAULTVALUE"],t.DEALTYPE,e.setValue("AMT",a,t)})}),o()(m,Y.M_SETAMT,function(t){var e=j.getTable("MAIN"),a=j.getTable("DTS");a.data.filter(function(t){return""!=t["STLITEMID.CFORMULA"]}).sort(function(t,e){}).forEach(function(t){var e=Object(P.a)(t["ITEMID.PARANAME"],function(t){var e=a.data.find(function(e){return e["ITEMID.PARANAME"]==t});if(e)return e["STLITEMID.CFORMULA"]},function(t){var e=a.data.find(function(e){return e["ITEMID.PARANAME"]==t});return e&&e.AMT||0});a.setValue("AMT",e,t)});var r={OFFLINEAMT:107070,ONLINEAMT:107069,DIFFAMT:107064,CALAMT:107063};u()(r).forEach(function(t){var n=a.data.find(function(e){return e.ITEMID==r[t]}),s=(n||{}).AMT||0;e.setValue(t,s,n)});var n=e.getValue("OFFLINEAMT"),s=e.getValue("ONLINEAMT"),i=e.getValue("DIFFAMT"),T=parseFloat((parseFloat(n)/(parseFloat(n)+parseFloat(s))*100).toFixed("1")),E=parseFloat((parseFloat(s)/(parseFloat(n)+parseFloat(s))*100).toFixed("1")),c=parseFloat((parseFloat(i)/(parseFloat(n)+parseFloat(s))*100).toFixed("1"));e.setValue("OFFLINERATE",T),e.setValue("ONLINERATE",E),e.setValue("DIFFRATE",c)}),o()(m,Y.M_SETEMP,function(t,e){var a=e.path,r=e.item,n=j.getTable(a);n.setValue("MANAGERID",r.EMPID),n.setValue("MANAGER",r.EMPNAME)}),o()(m,Y.M_SETSNODE,function(t,e){var a=e.path,r=e.item,n=j.getTable(a);n.setValue("SNODEID",r.SNODEID),n.setValue("SNODEID.SNODECODE",r.SNODECODE),n.setValue("SNODEID.SNODENAME",r.SNODENAME)}),o()(m,Y.M_SETSETDTS,function(t){var e=j.getTable("DTS"),a=j.getTable("SETDTS");a.initData(),e.data.forEach(function(t){var e={},r=t["STLITEMID.ITEMPROPERTY"],n=t.ISDELBYU;u()(t).forEach(function(a){e[a]=t[a]}),e.DISABLE=!1,e.ISSELECT=!0,"select"==r?"1"==n&&(e.ISSELECT=!1):e.DISABLE=!0,a.add(e)})}),o()(m,Y.M_SETDTSISDELBYU,function(){var t=j.getTable("DTS");j.getTable("SETDTS").data.filter(function(t){return 0==t.DISABLE}).forEach(function(e){var a=t.data.find(function(t){return t.ITEMID==e.ITEMID});a&&t.setValue("ISDELBYU",e.ISSELECT?0:1,a)})}),o()(m,Y.M_SETREJECTAMT,function(t,e){var a=e.item,r=j.getTable("DTS"),n=a.AMT,s=a["STLITEMID.ISPN"],i=a["STLITEMID.ISZERO"],T=a["STLITEMID.ISNN"];(0==s&&n>0||0==i&&0==n||0==T&&n<0)&&r.setValue("AMT","",a)}),m)),H=function(){var t=E()(n.a.mark(function t(e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new i.a(function(t,a){try{t(e())}catch(t){a(t)}}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),W=l()({},j.mixActions(),{add:function(){var t=E()(n.a.mark(function t(e){e.dispatch;var a,r,s,i,T,E=e.commit,c=e.state;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(function(){});case 2:return E(Y.M_INITBYPATH,{paths:["MAIN","DTS"]}),t.next=5,F.doLoadSTLFMITE({STLTYPEID:c.params.STLTYPEID,BILLDATE:Object(B.c)(new Date)});case 5:return a=t.sent,E(Y.M_INITDATA,{path:"STLFMITEM",data:(a.data||{}).items}),E(Y.M_ADDDEFAULT),r=j.getTable("MAIN"),s=r.getValue("SNODEID"),i=r.getValue("STLFMID"),t.next=13,F.doLoadCOPYDTS({DSNODEID:s,STLFMID:i});case 13:T=t.sent,E(Y.M_INITDATA,{path:"COPYDTS",data:(T.data||{}).items}),E(Y.M_SETDTS01),E(Y.M_SETDTS02),E(Y.M_SETDTS03),E(Y.M_SETDTS04),E(Y.M_SETDTS05),E(Y.M_SETAMT),E(Y.M_SETSTATE);case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadCOPYDTS:function(){var t=E()(n.a.mark(function t(e){e.dispatch;var a,r,s,i,T=e.commit;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=j.getTable("MAIN"),r=a.getValue("SNODEID"),s=a.getValue("STLFMID"),t.next=5,F.doLoadCOPYDTS({DSNODEID:r,STLFMID:s});case 5:i=t.sent,T(Y.M_INITDATA,{path:"COPYDTS",data:(i.data||{}).items}),T(Y.M_SETDTS01),T(Y.M_SETDTS02),T(Y.M_SETDTS03),T(Y.M_SETDTS04),T(Y.M_SETDTS05),T(Y.M_SETAMT);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadSTLFMITE:function(){var t=E()(n.a.mark(function t(e){var a,r,s,i,T=e.dispatch,E=e.commit,c=e.state;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=j.getTable("STLFMITEM"),r=a.getValue("STLFMID"),s=j.getTable("MAIN"),console.log(s),t.next=6,F.doLoadSTLFMITE({STLTYPEID:c.params.STLTYPEID,BILLDATE:s.getValue("BILLDATE")});case 6:i=t.sent,E(Y.M_INITDATA,{path:"STLFMITEM",data:(i.data||{}).items}),r!=a.getValue("STLFMID")&&T("loadCOPYDTS");case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),setSnode:function(){var t=E()(n.a.mark(function t(e,a){var r=e.dispatch,s=e.commit,i=a.path,T=a.item;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s(Y.M_SETSNODE,{path:i,item:T}),t.next=3,r("loadCOPYDTS");case 3:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),setSetDTS:function(t){var e=t.commit;e(Y.M_SETDTSISDELBYU),e(Y.M_SETDTS03),e(Y.M_SETDTS04),e(Y.M_SETDTS05),e(Y.M_SETAMT)},mySave:function(){var t=E()(n.a.mark(function t(e){var a=e.dispatch;e.commit;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H($);case 2:return t.next=4,a("save");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),setForm:function(t){var e=t.commit,a={};this.getters.userInfo.DSNODEID;a.BILLID="",a.BILLDATE=Object(B.c)(new Date),a.sqlId="51485",a.pageSize="10",a.keyFields="BILLID",_.a.open(a).then(function(t){e(Y.M_INITDATA,{path:"QRY",data:(t.data||{}).items})})}}),$=function(){var t=j.getTable("MAIN"),e=j.getTable("DTS"),a=[];Object(P.b)(t.getValue("SNODEID"))&&a.push("经营门店"),Object(P.b)(t.getValue("BILLDATE"))&&a.push("日期"),Object(P.b)(t.getValue("MANAGERID"))&&a.push("店长"),M.a.getters[Y.STORE_NAME+"/ISTIME"]||Object(P.b)(t.getValue("DEADTIME"))&&a.push("截止时间");var r=e.data.find(function(t){return"差异"==t["ITEMID.PARANAME"]});r&&(Object(P.b)(r.AMT)||0==r.AMT||Object(P.b)(t.getValue("DIFFREMARK"))&&a.push("差异说明"));var n=[];if(e.data.forEach(function(t){var e=t.AMT,a=t["STLITEMID.ISPN"],r=t["STLITEMID.ISNULLF"],s=t["STLITEMID.ISZERO"],i=t["STLITEMID.ISNN"];0==a&&e>0||0==r&&Object(P.b)(e),0==a&&e>0&&n.push("\n"+t["ITEMID.PARANAME"]+"金额不可大于零"),0==r&&Object(P.b)(e)&&n.push("\n"+t["ITEMID.PARANAME"]+"金额不可为空"),0==s&&"0"==e&&n.push("\n"+t["ITEMID.PARANAME"]+"金额不可为零"),0==i&&e<0&&n.push("\n"+t["ITEMID.PARANAME"]+"金额不可小于零")}),a.length>0||n.length>0){if(a.length>0)throw new Error(a.join(",")+" 空,"+n.join(",")+" \n不可保存");throw new Error(n.join(",")+" \n不可保存")}};M.a.registerModule(Y.STORE_NAME,{namespaced:!0,state:k,getters:{ISTIME:function(t){return"109304"==t.params.BILLTYPEID},ISSHOWSAVE:function(t,e,a,r){return("Add"==t.STATE||"ToVerify"==t.STATE)&&r.pcode[e.ISTIME?"jiesuan-fsjs-submit":"jiesuan-rijs-submit"]},ISSHOWDELETE:function(t,e,a,r){return"ToVerify"==t.STATE&&r.pcode[e.ISTIME?"jiesuan-fsjs-delete":"jiesuan-rijs-delete"]},ISSHOWCHECK:function(t,e,a,r){return"ToVerify"==t.STATE&&r.pcode[e.ISTIME?"jiesuan-fsjs-verify":"jiesuan-rijs-verify"]},ISSHOWRECHECK:function(t,e,a,r){return t.STATE==(e.ISTIME?"Verified":"ToTally")&&r.pcode[e.ISTIME?"jiesuan-fsjs-reverify":"jiesuan-rijs-reverify"]}},mutations:U,actions:W});var q=function(t,e,a){return j.mapGetters(t,e,a)}}});
//# sourceMappingURL=4.68b3cb0a12a0fdc74dd2.js.map