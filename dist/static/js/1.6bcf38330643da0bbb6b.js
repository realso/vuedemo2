webpackJsonp([1],{"/HFg":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),s=a.n(r),n=a("J0Oq"),i=a.n(n),o=(a("itJA"),a("KZdK"),{data:function(){return{transitionName:"slide-right"}},activated:function(){var t=this;console.log(this.$route.path,"color:red"),setTimeout(i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.commit("jiesuan/setParams",t.$route.query),"ADD"==t.$route.query.ACTION&&t.$store.dispatch("jiesuan/add",t.$route.query).then(function(){}).catch(function(t){alert(t.message)}),"VIEW"==t.$route.query.ACTION&&t.$store.dispatch("jiesuan/open",t.$route.query);case 3:case"end":return e.stop()}},e,t)})),600)}}),E={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%",width:"100%"}},[e("transition",{attrs:{name:this.transitionName}},[e("keep-alive",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(o,E,!1,function(t){a("chtG")},null,null);e.default=c.exports},"44qn":function(t,e,a){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(t,e){if(t===e)return 0;for(var a=t.length,r=e.length,s=0,n=Math.min(a,r);s<n;++s)if(t[s]!==e[s]){a=t[s],r=e[s];break}return a<r?-1:r<a?1:0}function s(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var n=a("KZdK"),i=Object.prototype.hasOwnProperty,o=Array.prototype.slice,E="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function T(t){return!s(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var u=t.exports=M,I=/\s*function\s+([^\(\s]*)\s*/;function l(t){if(n.isFunction(t)){if(E)return t.name;var e=t.toString().match(I);return e&&e[1]}}function S(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function D(t){if(E||!n.isFunction(t))return n.inspect(t);var e=l(t);return"[Function"+(e?": "+e:"")+"]"}function f(t,e,a,r,s){throw new u.AssertionError({message:a,actual:t,expected:e,operator:r,stackStartFunction:s})}function M(t,e){t||f(t,!0,e,"==",u.ok)}function d(t,e,a,i){if(t===e)return!0;if(s(t)&&s(e))return 0===r(t,e);if(n.isDate(t)&&n.isDate(e))return t.getTime()===e.getTime();if(n.isRegExp(t)&&n.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(T(t)&&T(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(s(t)!==s(e))return!1;var E=(i=i||{actual:[],expected:[]}).actual.indexOf(t);return-1!==E&&E===i.expected.indexOf(e)||(i.actual.push(t),i.expected.push(e),function(t,e,a,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(n.isPrimitive(t)||n.isPrimitive(e))return t===e;if(a&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var s=L(t),i=L(e);if(s&&!i||!s&&i)return!1;if(s)return t=o.call(t),e=o.call(e),d(t,e,a);var E,c,T=v(t),u=v(e);if(T.length!==u.length)return!1;for(T.sort(),u.sort(),c=T.length-1;c>=0;c--)if(T[c]!==u[c])return!1;for(c=T.length-1;c>=0;c--)if(E=T[c],!d(t[E],e[E],a,r))return!1;return!0}(t,e,a,i))}return a?t===e:t==e}function L(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function A(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function _(t,e,a,r){var s;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof a&&(r=a,a=null),s=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(a&&a.name?" ("+a.name+").":".")+(r?" "+r:"."),t&&!s&&f(s,a,"Missing expected exception"+r);var i="string"==typeof r,o=!t&&n.isError(s),E=!t&&s&&!a;if((o&&i&&A(s,a)||E)&&f(s,a,"Got unwanted exception"+r),t&&s&&a&&!A(s,a)||!t&&s)throw s}u.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=S(D((e=this).actual),128)+" "+e.operator+" "+S(D(e.expected),128),this.generatedMessage=!0);var a=t.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,a);else{var r=new Error;if(r.stack){var s=r.stack,n=l(a),i=s.indexOf("\n"+n);if(i>=0){var o=s.indexOf("\n",i+1);s=s.substring(o+1)}this.stack=s}}},n.inherits(u.AssertionError,Error),u.fail=f,u.ok=M,u.equal=function(t,e,a){t!=e&&f(t,e,a,"==",u.equal)},u.notEqual=function(t,e,a){t==e&&f(t,e,a,"!=",u.notEqual)},u.deepEqual=function(t,e,a){d(t,e,!1)||f(t,e,a,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(t,e,a){d(t,e,!0)||f(t,e,a,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(t,e,a){d(t,e,!1)&&f(t,e,a,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function t(e,a,r){d(e,a,!0)&&f(e,a,r,"notDeepStrictEqual",t)},u.strictEqual=function(t,e,a){t!==e&&f(t,e,a,"===",u.strictEqual)},u.notStrictEqual=function(t,e,a){t===e&&f(t,e,a,"!==",u.notStrictEqual)},u.throws=function(t,e,a){_(!0,t,e,a)},u.doesNotThrow=function(t,e,a){_(!1,t,e,a)},u.ifError=function(t){if(t)throw t};var v=Object.keys||function(t){var e=[];for(var a in t)i.call(t,a)&&e.push(a);return e}}).call(e,a("9AUj"))},"4dON":function(t,e){},"4g9L":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("4YfN"),s=a.n(r),n=a("FYzL"),i=a("JIbx"),o={props:{item:Object},computed:s()({},Object(n.b)("DTS",["ITEMID","STLITEMID_GRPID","AMT","STLITEMID_PARANAME","ITEMID_PARANAME","ISSHOW","DEALTYPE","STLITEMID_ISLBSHOW","STLITEMID_ISLBB","STLITEMID_LBCOLOR","STLITEMID_LBUNDERLINE","STLITEMID_PNCOLOR","STLITEMID_ZEROCOLOR","STLITEMID_NNCOLOR","STLITEMID_ISPN","STLITEMID_ISZERO","STLITEMID_ISNULLF","STLITEMID_ISNN"],"item")),watch:{AMT:function(){this.$store.commit(n.a.STORE_NAME+"/setRejectAMT",{item:this.item}),this.$store.commit(n.a.STORE_NAME+"/setAMT")}},filters:{toFixed:function(t,e){if("0"==t||""!=t)return parseFloat(t||0).toFixed(e)}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1==t.ISSHOW?a("rs-list-item",{class:{"rr-border":"LongBlack"==t.STLITEMID_LBUNDERLINE},attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[1==t.STLITEMID_ISLBSHOW?a("div",{staticClass:"rr-width-5em",class:{"rr-weight":1==t.STLITEMID_ISLBB},style:{color:t.STLITEMID_LBCOLOR}},[t._v("\n      "+t._s(t.ITEMID_PARANAME)+"\n    ")]):t._e(),t._v(" "),a("div",{staticClass:"rs-flex-item rr-text-right",class:{"rr-line-b":"ShortGrey"==t.STLITEMID_LBUNDERLINE},style:{color:parseFloat(t.AMT)>0?t.STLITEMID_PNCOLOR:parseFloat(t.AMT)<0?t.STLITEMID_NNCOLOR:t.STLITEMID_ZEROCOLOR}},["Count"==t.DEALTYPE?a("div",[t._v(t._s(t._f("toFixed")(t.AMT,2)))]):t._e(),t._v(" "),"Write"==t.DEALTYPE?a("rs-numInput",{staticClass:"rs-flex-item",attrs:{height:"24",size:"14",text:t._f("toFixed")(t.AMT,2)},model:{value:t.AMT,callback:function(e){t.AMT=e},expression:"AMT"}}):t._e()],1)])]):t._e()},staticRenderFns:[]};var c={props:{TITLE:""},name:"jiesuan",data:function(){return{ISINPUTSHOW:!1,length:parseInt(this.$route.query.length),index:parseInt(this.$route.query.index)}},components:{main_dts:a("C7Lr")(o,E,!1,function(t){a("HtI3")},"data-v-6033238c",null).exports},computed:s()({},Object(n.c)(["ISSHOWSAVE","ISSHOWDELETE","ISTIME"]),Object(n.b)("MAIN",["BILLTYPEID","BILLDATE","BILLCODE","SNODEID.SNODECODE","SNODEID.SNODENAME","MANAGER","DIFFREMARK","MAKER","VERIFIER","MAKEDATE","VERIFYDATE","TALLIER","TALLYDATE","FHOUR","FMINUTE","DEADLINE"]),Object(n.b)("DTS",[]),{firstIndex:function(){return 0!=this.index?this.index:-1},preIndex:function(){return this.index-1>=0?this.index-1:-1},nextIndex:function(){return this.index+1<=this.length-1?this.index+1:-1},endIndex:function(){return this.index!=this.length-1?this.index:-1}}),methods:{more_first:function(){-1!=this.firstIndex&&(this.index=0,this.doquery())},more_pre:function(){-1!=this.preIndex&&(this.index=this.index-1,this.doquery())},more_next:function(){-1!=this.nextIndex&&(this.index=this.index+1,this.doquery())},more_end:function(){-1!=this.endIndex&&(this.index=this.length-1,this.doquery())},doquery:function(t){this.$router.push({path:"/jiesuan1/detail/main",query:{index:this.index}})}},watch:{DEADLINE:function(){this.$store.commit(n.a.STORE_NAME+"/"+n.a.M_SETDEADLINE)}},activated:function(){console.log("%c"+this.$route.path,"color:red")},filters:{getWeek:function(t){return t?t+" "+Object(i.e)(t):""}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-layout mui-layout-top"},[a("rs-header",{attrs:{title:t.TITLE,color:"primary"}},[a("a",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"})]),t._v(" "),a("div",{staticClass:"rs-nex-prev"},[a("span",{staticClass:"rr-left rr-font rr-prevA",class:-1!=t.firstIndex?"c-active":"c-999",on:{click:t.more_first}}),t._v(" "),a("span",{staticClass:"rr-left rr-font rr-prev",class:-1!=t.preIndex?"c-active":"c-999",on:{click:t.more_pre}}),t._v(" "),a("span",{staticClass:"rr-right rr-font rr-nextA",class:-1!=t.endIndex?"c-active":"c-999",on:{click:t.more_end}}),t._v(" "),a("span",{staticClass:"rr-right rr-font rr-next",class:-1!=t.nextIndex?"c-active":"c-999",on:{click:t.more_next}})]),t._v(" "),a("div",{staticClass:"mui-content"},[a("rs-list",{staticClass:"rr-line-24",attrs:{size:"15",noborder:""}},[a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("经 营 门 店")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-line-b"},[t._v("\n               index:"+t._s(t.index)+"length:"+t._s(t.length)+" "+t._s(this["SNODEID.SNODECODE"])+" "+t._s(this["SNODEID.SNODENAME"])+"\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("日 期")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-line-b"},[t._v("\n                "+t._s(t._f("getWeek")(t.BILLDATE))+"\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("店 长")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-line-b"},[t._v("\n                "+t._s(t.MANAGER)+" \n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("实 际 收 入")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-text-center rr-line-b"},[t._v("\n                "+t._s(t.DEADLINE)+"\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("线 下")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-text-center rr-line-b"},[a("span",{staticClass:"rr-right"},[t._v("n.n%")]),t._v("\n              200\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("线 上")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-text-center rr-line-b"},[a("span",{staticClass:"rr-right"},[t._v("n.n%")]),t._v("\n                10000\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("差 异")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-text-center rr-line-b"},[a("span",{staticClass:"rr-right"},[t._v("n.n‰")]),t._v("\n                "+t._s(t.DEADLINE)+"\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("差 异 说 明")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                "+t._s(t.DEADLINE)+"\n            ")])])])],1),t._v(" "),a("div",{staticStyle:{height:"7px",background:"#eee"}}),t._v(" "),a("rs-list",{attrs:{size:"14",noborder:""}},t._l(t.DTS,function(t){return a("main_dts",{key:t.ENTRYID,attrs:{item:t}})})),t._v(" "),a("div",{staticStyle:{height:"7px",background:"#eee"}}),t._v(" "),a("div",{staticClass:"rr-bill-top"},[""!=t.BILLCODE?a("div",{staticClass:"rs-flex-row",staticStyle:{height:"33px"}},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("单 据 号")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                  "+t._s(t.BILLCODE)+"\n              ")])]):t._e(),t._v(" "),""!=t.MAKER?a("div",{staticClass:"rs-flex-row",staticStyle:{height:"33px"}},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("填 报")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                  "+t._s(t.MAKER)+" "+t._s(t.MAKEDATE)+"\n              ")])]):t._e(),t._v(" "),""!=t.VERIFIER?a("div",{staticClass:"rs-flex-row",staticStyle:{height:"33px"}},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("审 核")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                   "+t._s(t.VERIFIER)+" "+t._s(t.VERIFYDATE)+"\n              ")])]):t._e()])],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(c,T,!1,function(t){a("4dON")},"data-v-bd47d572",null);e.default=u.exports},"7UNl":function(t,e){},"8Kpb":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),s=a.n(r),n=a("J0Oq"),i=a.n(n),o=a("4YfN"),E=a.n(o),c=a("itJA"),T=a("JIbx"),u={props:{item:Object},computed:E()({},Object(c.b)("DTS",["ITEMID","STLITEMID_GRPID","AMT","STLITEMID_PARANAME","ITEMID_PARANAME","ISSHOW","DEALTYPE","STLITEMID_ISLBSHOW","STLITEMID_ISLBB","STLITEMID_LBCOLOR","STLITEMID_LBUNDERLINE","STLITEMID_PNCOLOR","STLITEMID_ZEROCOLOR","STLITEMID_NNCOLOR","STLITEMID_ISPN","STLITEMID_ISZERO","STLITEMID_ISNULLF","STLITEMID_ISNN"],"item")),watch:{AMT:function(){this.$store.commit("jiesuan/checkRange",{item:this.item}),this.$store.commit("jiesuan/setAMT")}},filters:{toFixed:function(t,e){if("0"==t||""!=t)return parseFloat(t||0).toFixed(e)}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1==t.ISSHOW?a("rs-list-item",{class:{"rr-border":"LongBlack"==t.STLITEMID_LBUNDERLINE},attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row",staticStyle:{"min-height":"24px"}},[1==t.STLITEMID_ISLBSHOW?a("div",{staticClass:"rr-width-5em",class:{"rr-weight":1==t.STLITEMID_ISLBB},style:{color:t.STLITEMID_LBCOLOR}},[t._v("\r\n        "+t._s(t.ITEMID_PARANAME)+"\r\n      ")]):t._e(),t._v(" "),a("div",{staticClass:"rs-flex-item rr-text-right",class:{"rr-line-b1":"ShortGrey"==t.STLITEMID_LBUNDERLINE},style:{color:parseFloat(t.AMT)>0?t.STLITEMID_PNCOLOR:parseFloat(t.AMT)<0?t.STLITEMID_NNCOLOR:t.STLITEMID_ZEROCOLOR}},["Count"==t.DEALTYPE?a("div",[t._v(t._s(t._f("toFixed")(t.AMT,2)))]):t._e(),t._v(" "),"Write"==t.DEALTYPE?a("rs-numInput",{staticClass:"rs-flex-item",attrs:{height:"24",size:"14",text:t._f("toFixed")(t.AMT,2)},model:{value:t.AMT,callback:function(e){t.AMT=e},expression:"AMT"}}):t._e()],1)])]):t._e()},staticRenderFns:[]};var l={props:{},name:"jiesuan",data:function(){return{ISINPUTSHOW:!1}},components:{main_dts:a("C7Lr")(u,I,!1,function(t){a("dyPA")},"data-v-7a156588",null).exports},computed:E()({},Object(c.c)(["ISSHOWSAVE","ISSHOWCHECK","ISSHOWRECHECK","ISSHOWDELETE","TITLE","ISTIME"]),Object(c.b)("MAIN",["BILLTYPEID","BILLDATE","BILLCODE","SNODEID.SNODECODE","SNODEID.SNODENAME","MANAGER","DIFFREMARK","MANAGER","MAKER","VERIFIER","MAKEDATE","VERIFYDATE","DEADLINE","FHOUR","FMINUTE"]),Object(c.b)("DTS",[]),{ISSHOWWD:function(){return""!=this.EMPID}}),methods:{linkUrl:function(t){this.$router.push({path:"/jiesuan/add/"+t})},open:function(t){this.$refs[t].open()},handleChangeD:function(){this.$callAction({action:c.a.STORE_NAME+"/loadSTLFMITE"})},handleChangeT:function(t){this.FHOUR=t.substring(0,2),this.FMINUTE=t.substring(-1,2)},save:function(){this.$callAction({action:c.a.STORE_NAME+"/list_save",successText:"保存成功"})},check:function(){this.$callAction({action:c.a.STORE_NAME+"/check",successText:"审核成功"})},reCheck:function(){this.$callAction({action:c.a.STORE_NAME+"/recheck",successText:"已撤销审核"})},del:function(){var t=this;return i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("确认删除？");case 2:t.$callAction({action:c.a.STORE_NAME+"/delete",successText:"删除成功",isSuccessBack:!0});case 3:case"end":return e.stop()}},e,t)}))()}},activated:function(){console.log("%c"+this.$route.path,"color:red")},watch:{DEADLINE:function(){this.$store.commit(c.a.STORE_NAME+"/setTime")}},filters:{getWeek:function(t){return t?t+" "+Object(T.e)(t):""}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-layout mui-layout-top"},[a("rs-header",{attrs:{title:t.TITLE,color:"primary"}},[a("router-link",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{slot:"left",to:"/"},slot:"left"}),t._v(" "),a("div",{attrs:{slot:"right"},slot:"right"},[t.ISSHOWCHECK?a("rs-button",{attrs:{link:""},on:{click:t.check}},[t._v("审核")]):t._e(),t._v(" "),t.ISSHOWRECHECK?a("rs-button",{attrs:{link:""},on:{click:t.reCheck}},[t._v("撤销审核")]):t._e(),t._v(" "),t.ISSHOWDELETE?a("rs-button",{attrs:{link:""},on:{click:t.del}},[t._v("删除")]):t._e(),t._v(" "),t.ISSHOWSAVE?a("rs-button",{attrs:{link:""},on:{click:t.save}},[t._v("保存")]):t._e()],1)],1),t._v(" "),a("div",{staticClass:"mui-content"},[a("rs-list",{staticClass:"rr-line-24",attrs:{size:"15",noborder:""}},[a("rs-list-item",{attrs:{isright:""},nativeOn:{click:function(e){t.linkUrl("snodesel")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("经营门店")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v(t._s(this["SNODEID.SNODECODE"])+" "+t._s(this["SNODEID.SNODENAME"]))])])]),t._v(" "),a("rs-list-item",{attrs:{isright:""},nativeOn:{click:function(e){t.linkUrl("empsel")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("店长")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v(t._s(t.MANAGER))])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:!t.ISTIME,isright:""},nativeOn:{click:function(e){t.open("picker2")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("日 期")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v(t._s(t._f("getWeek")(t.BILLDATE)))])])]),t._v(" "),t.ISTIME?a("rs-list-item",{attrs:{noborder:"",isright:""},nativeOn:{click:function(e){t.open("picker1")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("截 止 时 间")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n             "+t._s(t.DEADLINE)+"\n          ")])])]):t._e()],1),t._v(" "),a("rs-datetime",{key:"jiesuan.2",ref:"picker2",attrs:{type:"date"},on:{confirm:t.handleChangeD},model:{value:t.BILLDATE,callback:function(e){t.BILLDATE=e},expression:"BILLDATE"}}),t._v(" "),a("rs-datetime",{key:"jiesuan.1",ref:"picker1",attrs:{type:"time"},model:{value:t.DEADLINE,callback:function(e){t.DEADLINE=e},expression:"DEADLINE"}}),t._v(" "),a("div",{staticClass:"rr-text-right"},[a("rs-button",{attrs:{link:""},nativeOn:{click:function(e){t.linkUrl("set")}}},[t._v("设置项目")])],1),t._v(" "),a("rs-list",{staticClass:"rr-line-24",attrs:{size:"14",noborder:""}},t._l(t.DTS,function(t){return a("main_dts",{key:t.ENTRYID,attrs:{item:t}})})),t._v(" "),a("div",{staticClass:"rr-list-textarea"},[t.ISTIME?t._e():a("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.DIFFREMARK,expression:"DIFFREMARK",modifiers:{lazy:!0}}],attrs:{rows:"3",placeholder:"差异说明"},domProps:{value:t.DIFFREMARK},on:{change:function(e){t.DIFFREMARK=e.target.value}}})]),t._v(" "),a("rs-list",{staticClass:"rr-line-24 mt10",attrs:{size:"14",noborder:""}},[""!=t.BILLCODE?a("rs-list-item",[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("单 据 号")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v(t._s(t.BILLCODE))])])]):t._e(),t._v(" "),""!=t.MAKER?a("rs-list-item",[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("制 单")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v(t._s(t.MAKER)+" "+t._s(t.MAKEDATE))])])]):t._e(),t._v(" "),""!=t.VERIFIER?a("rs-list-item",{attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("审 核")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v(t._s(t.VERIFIER)+" "+t._s(t.VERIFYDATE))])])]):t._e()],1)],1)],1)},staticRenderFns:[]};var D=a("C7Lr")(l,S,!1,function(t){a("7UNl")},"data-v-55738294",null);e.default=D.exports},C5Tr:function(t,e,a){"use strict";a.d(e,"c",function(){return m}),a.d(e,"b",function(){return P}),a.d(e,"a",function(){return N});var r,s,n=a("lC5x"),i=a.n(n),o=a("rVsN"),E=a.n(o),c=a("J0Oq"),T=a.n(c),u=a("a3Yh"),I=a.n(u),l=a("ZLEe"),S=a.n(l),D=a("4YfN"),f=a.n(D),M=a("aA9S"),d=a.n(M),L=a("IcnI"),A=a("9rMa"),_=a("FYOt"),v=a("78rJ"),p=a("JIbx"),h=a("aP4p"),N=d()({},v.a,{STORE_NAME:"jiesuan1",M_ADDDEFAULT:"addDefault",M_SETDTS01:"setDts01",M_SETDTS02:"setDts02",M_SETDTS03:"setDts03",M_SETDTS04:"setDts04",M_SETDTS05:"setDts05",M_SETAMT:"setAMT",M_SETEMP:"setEmp",M_SETSNODE:"setSnode",M_SETSETDTS:"setSetDTS",M_SETDTSISDELBYU:"setDTSISDELBYU",M_SETREJECTAMT:"setRejectAMT",M_SETDEADLINE:"setDEADLINE"}),O=Object(A.a)(N.STORE_NAME),m=(O.mapState,O.mapGetters),C=new v.b({service:_.a,paths:{MAIN:"TBV_SNSTL_M",DTS:"TBV_SNSTLDTS_M",SETDTS:"TBV_SNSTLDTS_M",STLFMITEM:"TBV_STLFMITEM",COPYDTS:"TBV_SNSTLDTS_M",SNODE:"TBV_CHAINSND_SEL"},MAINPATH:"MAIN",SUBPATH:["DTS"],XULID:"0000051437",OPRTFLOWID:"30307",EMPFIELD:"MANAGERID"}),R=f()({params:{ACTION:"",STLTYPEID:"",BILLTYPEID:""}},C.mixState()),g=f()({},C.mixMutations(),(r={},I()(r,N.M_SETPARAMS,function(t,e){t.params=e,"109303"==t.params.BILLTYPEID&&C.setConfig({XULID:"0000051437",OPRTFLOWID:"30307"}),"109304"==t.params.BILLTYPEID&&C.setConfig({XULID:"0000051465",OPRTFLOWID:"30244"})}),I()(r,N.M_ADDDEFAULT,function(t){var e=C.getTable("MAIN"),a=C.getTable("STLFMITEM");e.add({}),e.setValue("AID",this.getters.userInfo.AID),e.setValue("BILLTYPEID",t.params.BILLTYPEID),e.setValue("SNODEID",this.getters.userInfo.DSNODEID),e.setValue("SNODEID.SNODECODE",this.getters.userInfo.DSNODECODE),e.setValue("SNODEID.SNODENAME",this.getters.userInfo.DSNODENAME),e.setValue("MANAGERID",this.getters.userInfo.EMPID),e.setValue("MANAGER",this.getters.userInfo.EMPNAME),e.setValue("BILLDATE",Object(p.c)(new Date)),e.setValue("STLFMID",a.getValue("STLFMID")),e.setValue("STLFMCODE",a.getValue("STLFMCODE")),this.getters[N.STORE_NAME+"/ISTIME"]&&e.setValue("DEADLINE",Object(p.d)(new Date))}),I()(r,N.M_SETDEADLINE,function(t){var e=C.getTable("MAIN"),a=e.getValue("DEADLINE"),r="",s="";a&&(r=a.split(":")[0],s=a.split(":")[1]),e.setValue("FHOUR",r),e.setValue("FMINUTE",s)}),I()(r,N.M_SETDTS01,function(t){var e=C.getTable("MAIN"),a=C.getTable("STLFMITEM"),r=C.getTable("DTS");r.clear(),a.data.forEach(function(t){var e={};e.ITEMID=t.ITEMID,e["ITEMID.PARANAME"]=t["ITEMID.PARANAME"],e.STLITEMID=t.STLITEMID,S()(t).forEach(function(a){e["STLITEMID."+a]=t[a]}),e.DEALTYPE=t.DEALTYPE,r.add(e)}),"1"!=e.getValue("SNODEID.ISREADSTL")&&r.data.map(function(t){"EDI"==t.DEALTYPE&&r.setValue("DEALTYPE","Write",t)})}),I()(r,N.M_SETDTS02,function(t){var e=C.getTable("COPYDTS"),a=C.getTable("DTS");a.data.forEach(function(t){if(a.setValue("ISDELBYU",0,t),"select"==t["STLITEMID.ITEMPROPERTY"]){var r=e.data.find(function(e){return e.STLITEMID==t.STLITEMID});r&&a.setValue("ISDELBYU",r.ISDELBYU,t)}})}),I()(r,N.M_SETDTS03,function(t){var e=C.getTable("DTS");e.data.forEach(function(t){var a=t["STLITEMID.ITEMPROPERTY"],r=t.ISDELBYU,s=1;"fixed"==a&&(s=1),"select"==a&&"1"==r&&(s=0),"hide"==a&&(s=0),e.setValue("ISSHOW",s,t)}),e.data.forEach(function(t){var a=0;"judge"==t["STLITEMID.ITEMPROPERTY"]&&(e.data.find(function(e){return e["STLITEMID.GRPID"]==t.ITEMID&&1==e.ISSHOW&&e.ITEMID!=e["STLITEMID.GRPID"]})&&(a=1),e.setValue("ISSHOW",a,t))})}),I()(r,N.M_SETDTS04,function(t){var e=C.getTable("DTS"),a=1;e.data.sort(function(t,e){return parseFloat(t["STLITEMID.ENTRYNUM"])-parseFloat(e["STLITEMID.ENTRYNUM"])}).forEach(function(t){e.setValue("ENTRYNUM","",t),1==t.ISSHOW&&e.setValue("ENTRYNUM",a++,t)})}),I()(r,N.M_SETDTS05,function(t){var e=C.getTable("DTS");e.data.forEach(function(t){var a="";a="1"==t.ISDELBYU?"":t.AMT||t["STLITEMID.DEFAULTVALUE"],t.DEALTYPE,e.setValue("AMT",a,t)})}),I()(r,N.M_SETAMT,function(t){var e=C.getTable("MAIN"),a=C.getTable("DTS");a.data.filter(function(t){return""!=t["STLITEMID.CFORMULA"]}).sort(function(t,e){}).forEach(function(t){var e=Object(h.a)(t["ITEMID.PARANAME"],function(t){var e=a.data.find(function(e){return e["ITEMID.PARANAME"]==t});if(e)return e["STLITEMID.CFORMULA"]},function(t){var e=a.data.find(function(e){return e["ITEMID.PARANAME"]==t});return e&&e.AMT||0});a.setValue("AMT",e,t)});var r={OFFLINEAMT:107070,ONLINEAMT:107069,DIFFAMT:107064,CALAMT:107063};S()(r).forEach(function(t){var s=a.data.find(function(e){return e.ITEMID==r[t]}),n=(s||{}).AMT||0;e.setValue(t,n,s)});var s=e.getValue("OFFLINEAMT"),n=e.getValue("ONLINEAMT"),i=e.getValue("DIFFAMT"),o=parseFloat((parseFloat(s)/(parseFloat(s)+parseFloat(n))*100).toFixed("1")),E=parseFloat((parseFloat(n)/(parseFloat(s)+parseFloat(n))*100).toFixed("1")),c=parseFloat((parseFloat(i)/(parseFloat(s)+parseFloat(n))*100).toFixed("1"));e.setValue("OFFLINERATE",o),e.setValue("ONLINERATE",E),e.setValue("DIFFRATE",c)}),I()(r,N.M_SETEMP,function(t,e){var a=e.path,r=e.item,s=C.getTable(a);s.setValue("MANAGERID",r.EMPID),s.setValue("MANAGER",r.EMPNAME)}),I()(r,N.M_SETSNODE,function(t,e){var a=e.path,r=e.item,s=C.getTable(a);s.setValue("SNODEID",r.SNODEID),s.setValue("SNODEID.SNODECODE",r.SNODECODE),s.setValue("SNODEID.SNODENAME",r.SNODENAME)}),I()(r,N.M_SETSETDTS,function(t){var e=C.getTable("DTS"),a=C.getTable("SETDTS");a.initData(),e.data.forEach(function(t){var e={},r=t["STLITEMID.ITEMPROPERTY"],s=t.ISDELBYU;S()(t).forEach(function(a){e[a]=t[a]}),e.DISABLE=!1,e.ISSELECT=!0,"select"==r?"1"==s&&(e.ISSELECT=!1):e.DISABLE=!0,a.add(e)})}),I()(r,N.M_SETDTSISDELBYU,function(){var t=C.getTable("DTS");C.getTable("SETDTS").data.filter(function(t){return 0==t.DISABLE}).forEach(function(e){var a=t.data.find(function(t){return t.ITEMID==e.ITEMID});a&&t.setValue("ISDELBYU",e.ISSELECT?0:1,a)})}),I()(r,N.M_SETREJECTAMT,function(t,e){var a=e.item,r=C.getTable("DTS"),s=a.AMT,n=a["STLITEMID.ISPN"],i=a["STLITEMID.ISZERO"],o=a["STLITEMID.ISNN"];(0==n&&s>0||0==i&&0==s||0==o&&s<0)&&r.setValue("AMT","",a)}),r)),b=(s=T()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new E.a(function(t,a){try{t(e())}catch(t){a(t)}}));case 1:case"end":return t.stop()}},t,this)})),function(t){return s.apply(this,arguments)}),F=f()({},C.mixActions(),{add:function(){var t=T()(i.a.mark(function t(e){e.dispatch;var a,r,s,n,o,E=e.commit,c=e.state;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(function(){});case 2:return E(N.M_INITBYPATH,{paths:["MAIN","DTS"]}),t.next=5,_.a.doLoadSTLFMITE({STLTYPEID:c.params.STLTYPEID,BILLDATE:Object(p.c)(new Date)});case 5:return a=t.sent,E(N.M_INITDATA,{path:"STLFMITEM",data:(a.data||{}).items}),E(N.M_ADDDEFAULT),r=C.getTable("MAIN"),s=r.getValue("SNODEID"),n=r.getValue("STLFMID"),t.next=13,_.a.doLoadCOPYDTS({DSNODEID:s,STLFMID:n});case 13:o=t.sent,E(N.M_INITDATA,{path:"COPYDTS",data:(o.data||{}).items}),E(N.M_SETDTS01),E(N.M_SETDTS02),E(N.M_SETDTS03),E(N.M_SETDTS04),E(N.M_SETDTS05),E(N.M_SETAMT),E(N.M_SETSTATE);case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadCOPYDTS:function(){var t=T()(i.a.mark(function t(e){e.dispatch;var a,r,s,n,o=e.commit;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=C.getTable("MAIN"),r=a.getValue("SNODEID"),s=a.getValue("STLFMID"),t.next=5,_.a.doLoadCOPYDTS({DSNODEID:r,STLFMID:s});case 5:n=t.sent,o(N.M_INITDATA,{path:"COPYDTS",data:(n.data||{}).items}),o(N.M_SETDTS01),o(N.M_SETDTS02),o(N.M_SETDTS03),o(N.M_SETDTS04),o(N.M_SETDTS05),o(N.M_SETAMT);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadSTLFMITE:function(){var t=T()(i.a.mark(function t(e){var a,r,s,n,o=e.dispatch,E=e.commit,c=e.state;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=C.getTable("STLFMITEM"),r=a.getValue("STLFMID"),s=C.getTable("MAIN"),console.log(s),t.next=6,_.a.doLoadSTLFMITE({STLTYPEID:c.params.STLTYPEID,BILLDATE:s.getValue("BILLDATE")});case 6:n=t.sent,E(N.M_INITDATA,{path:"STLFMITEM",data:(n.data||{}).items}),r!=a.getValue("STLFMID")&&o("loadCOPYDTS");case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),setSnode:function(){var t=T()(i.a.mark(function t(e,a){var r=e.dispatch,s=e.commit,n=a.path,o=a.item;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s(N.M_SETSNODE,{path:n,item:o}),t.next=3,r("loadCOPYDTS");case 3:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),setSetDTS:function(t){var e=t.commit;e(N.M_SETDTSISDELBYU),e(N.M_SETDTS03),e(N.M_SETDTS04),e(N.M_SETDTS05),e(N.M_SETAMT)},mySave:function(){var t=T()(i.a.mark(function t(e){var a=e.dispatch;e.commit;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(x);case 2:return t.next=4,a("save");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}),x=function(){var t=C.getTable("MAIN"),e=C.getTable("DTS"),a=[];Object(h.b)(t.getValue("SNODEID"))&&a.push("经营门店"),Object(h.b)(t.getValue("BILLDATE"))&&a.push("日期"),Object(h.b)(t.getValue("MANAGERID"))&&a.push("店长"),L.a.getters[N.STORE_NAME+"/ISTIME"]||Object(h.b)(t.getValue("DEADTIME"))&&a.push("截止时间");var r=e.data.find(function(t){return"差异"==t["ITEMID.PARANAME"]});r&&(Object(h.b)(r.AMT)||0==r.AMT||Object(h.b)(t.getValue("DIFFREMARK"))&&a.push("差异说明"));var s=[];if(e.data.forEach(function(t){var e=t.AMT,a=t["STLITEMID.ISPN"],r=t["STLITEMID.ISNULLF"],n=t["STLITEMID.ISZERO"],i=t["STLITEMID.ISNN"];0==a&&e>0||0==r&&Object(h.b)(e),0==a&&e>0&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可大于零"),0==r&&Object(h.b)(e)&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可为空"),0==n&&"0"==e&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可为零"),0==i&&e<0&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可小于零")}),a.length>0||s.length>0){if(a.length>0)throw new Error(a.join(",")+" 空,"+s.join(",")+" \n不可保存");throw new Error(s.join(",")+" \n不可保存")}};L.a.registerModule(N.STORE_NAME,{namespaced:!0,state:R,getters:{TITLE:function(t){return"109304"==t.params.BILLTYPEID?"分时结算":"日结算"},ISTIME:function(t){return"109304"==t.params.BILLTYPEID},ISSHOWSAVE:function(t,e,a,r){return("Add"==t.STATE||"ToVerify"==t.STATE)&&r.pcode[e.ISTIME?"jiesuan-fsjs-submit":"jiesuan-rijs-submit"]},ISSHOWDELETE:function(t,e,a,r){return"ToVerify"==t.STATE&&r.pcode[e.ISTIME?"jiesuan-fsjs-delete":"jiesuan-rijs-delete"]},ISSHOWCHECK:function(t,e,a,r){return"ToVerify"==t.STATE&&r.pcode[e.ISTIME?"jiesuan-fsjs-verify":"jiesuan-rijs-verify"]},ISSHOWRECHECK:function(t,e,a,r){return t.STATE==(e.ISTIME?"Verified":"ToTally")&&r.pcode[e.ISTIME?"jiesuan-fsjs-reverify":"jiesuan-rijs-reverify"]}},mutations:g,actions:F});var P=function(t,e,a){return C.mapGetters(t,e,a)}},DnmN:function(t,e){},Et8i:function(t,e,a){"use strict";e.a=async function(t){return new Promise(function(e,a){try{e(t())}catch(t){a(t)}})}},FYOt:function(t,e,a){"use strict";var r=a("YTJj"),s=a.n(r),n=a("lC5x"),i=a.n(n),o=a("J0Oq"),E=a.n(o),c=a("+9g/"),T=a("vNGi");Object(T.f)(c.a);var u,I,l,S,D=function(t,e){return{modalName:"TBV_STLFMITEM",where:"[STLFMID] = (SELECT STLFMID FROM VBV_STLFM_REF WHERE  ISVERIFY = 1 AND STLTYPEID ='"+t+"' AND TO_DATE('"+e+"','YYYY-MM-DD') BETWEEN SDATE AND NVL (EDATE,TO_DATE('2099-12-31','YYYY-MM-DD')))",orderBy:"[ENTRYNUM]",pageSize:1,pageIndex:1}},f=function(t,e){return{modalName:"TBV_SNSTLDTS_M",where:"[BILLID] IN (SELECT * FROM (SELECT BILLID FROM TBV_SNSTL WHERE AID = @AID AND SNODEID = '"+t+"' AND STLFMID = '"+e+"' AND NVL(ISDEL,0) = 0  ORDER BY  BILLDATE,FHOUR,FMINUTE DESC) WHERE  ROWNUM <2  )",orderBy:"",pageSize:1,pageIndex:1}},M=(u=E()(i.a.mark(function t(e){var a=e.DSNODEID,r=e.STLFMID;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.a.open(f(a,r)));case 1:case"end":return t.stop()}},t,this)})),function(t){return u.apply(this,arguments)}),d=(I=E()(i.a.mark(function t(e){var a=e.STLTYPEID,r=e.BILLDATE;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.a.open(D(a,r)));case 1:case"end":return t.stop()}},t,this)})),function(t){return I.apply(this,arguments)}),L=(l=E()(i.a.mark(function t(e){var a=e.SNODEID;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.a.open({modalName:"TBV_CHAINSND_SEL",where:"[SNODEID] ='"+a+"'",orderBy:"",pageSize:1,pageIndex:1}));case 1:case"end":return t.stop()}},t,this)})),function(t){return l.apply(this,arguments)});S=E()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s()(e),t.abrupt("return",c.a.open());case 2:case"end":return t.stop()}},t,this)}));e.a={doLoadCOPYDTS:M,doLoadSTLFMITE:d,doLoadSnode:L,doOpen:T.c,doSave:T.e,doDelete:T.b,doCheck:T.a,doReCheck:T.d}},FYzL:function(t,e,a){"use strict";a.d(e,"c",function(){return C}),a.d(e,"b",function(){return y}),a.d(e,"a",function(){return O});var r,s,n=a("lC5x"),i=a.n(n),o=a("rVsN"),E=a.n(o),c=a("J0Oq"),T=a.n(c),u=a("a3Yh"),I=a.n(u),l=a("ZLEe"),S=a.n(l),D=a("4YfN"),f=a.n(D),M=a("aA9S"),d=a.n(M),L=a("+9g/"),A=a("IcnI"),_=a("9rMa"),v=a("FYOt"),p=a("78rJ"),h=a("JIbx"),N=a("aP4p"),O=d()({},p.a,{STORE_NAME:"jiesuan1",M_ADDDEFAULT:"addDefault",M_SETDTS01:"setDts01",M_SETDTS02:"setDts02",M_SETDTS03:"setDts03",M_SETDTS04:"setDts04",M_SETDTS05:"setDts05",M_SETAMT:"setAMT",M_SETEMP:"setEmp",M_SETSNODE:"setSnode",M_SETSETDTS:"setSetDTS",M_SETDTSISDELBYU:"setDTSISDELBYU",M_SETREJECTAMT:"setRejectAMT",M_SETDEADLINE:"setDEADLINE",M_SETFORM:"setForm"}),m=Object(_.a)(O.STORE_NAME),C=(m.mapState,m.mapGetters),R=new p.b({service:v.a,paths:{QRY:"TBS_PARAMETER_REF",MAIN:"TBV_SNSTL_M",DTS:"TBV_SNSTLDTS_M",SETDTS:"TBV_SNSTLDTS_M",STLFMITEM:"TBV_STLFMITEM",COPYDTS:"TBV_SNSTLDTS_M",SNODE:"TBV_CHAINSND_SEL"},MAINPATH:"MAIN",SUBPATH:["DTS"],XULID:"0000051437",OPRTFLOWID:"30307",EMPFIELD:"MANAGERID"}),g=f()({params:{ACTION:"",STLTYPEID:"",BILLTYPEID:""}},R.mixState()),b=f()({},R.mixMutations(),(r={},I()(r,O.M_SETPARAMS,function(t,e){t.params=e,"109303"==t.params.BILLTYPEID&&R.setConfig({XULID:"0000051437",OPRTFLOWID:"30307"}),"109304"==t.params.BILLTYPEID&&R.setConfig({XULID:"0000051465",OPRTFLOWID:"30244"})}),I()(r,O.M_SETFORM,function(t){var e=t.commit,a={};this.getters.userInfo.DSNODEID;a.BILLID="",a.BILLDATE=Object(h.c)(new Date),a.sqlId="51485",a.pageSize="10",a.keyFields="BILLID",L.a.open(a).then(function(t){e(O.M_INITDATA,{path:"QRY",data:(t.data||{}).items})})}),I()(r,O.M_ADDDEFAULT,function(t){var e=R.getTable("MAIN"),a=R.getTable("STLFMITEM");e.add({}),e.setValue("AID",this.getters.userInfo.AID),e.setValue("BILLTYPEID",t.params.BILLTYPEID),e.setValue("SNODEID",this.getters.userInfo.DSNODEID),e.setValue("SNODEID.SNODECODE",this.getters.userInfo.DSNODECODE),e.setValue("SNODEID.SNODENAME",this.getters.userInfo.DSNODENAME),e.setValue("MANAGERID",this.getters.userInfo.EMPID),e.setValue("MANAGER",this.getters.userInfo.EMPNAME),e.setValue("BILLDATE",Object(h.c)(new Date)),e.setValue("STLFMID",a.getValue("STLFMID")),e.setValue("STLFMCODE",a.getValue("STLFMCODE")),this.getters[O.STORE_NAME+"/ISTIME"]&&e.setValue("DEADLINE",Object(h.d)(new Date))}),I()(r,O.M_SETDEADLINE,function(t){var e=R.getTable("MAIN"),a=e.getValue("DEADLINE"),r="",s="";a&&(r=a.split(":")[0],s=a.split(":")[1]),e.setValue("FHOUR",r),e.setValue("FMINUTE",s)}),I()(r,O.M_SETDTS01,function(t){var e=R.getTable("MAIN"),a=R.getTable("STLFMITEM"),r=R.getTable("DTS");r.clear(),a.data.forEach(function(t){var e={};e.ITEMID=t.ITEMID,e["ITEMID.PARANAME"]=t["ITEMID.PARANAME"],e.STLITEMID=t.STLITEMID,S()(t).forEach(function(a){e["STLITEMID."+a]=t[a]}),e.DEALTYPE=t.DEALTYPE,r.add(e)}),"1"!=e.getValue("SNODEID.ISREADSTL")&&r.data.map(function(t){"EDI"==t.DEALTYPE&&r.setValue("DEALTYPE","Write",t)})}),I()(r,O.M_SETDTS02,function(t){var e=R.getTable("COPYDTS"),a=R.getTable("DTS");a.data.forEach(function(t){if(a.setValue("ISDELBYU",0,t),"select"==t["STLITEMID.ITEMPROPERTY"]){var r=e.data.find(function(e){return e.STLITEMID==t.STLITEMID});r&&a.setValue("ISDELBYU",r.ISDELBYU,t)}})}),I()(r,O.M_SETDTS03,function(t){var e=R.getTable("DTS");e.data.forEach(function(t){var a=t["STLITEMID.ITEMPROPERTY"],r=t.ISDELBYU,s=1;"fixed"==a&&(s=1),"select"==a&&"1"==r&&(s=0),"hide"==a&&(s=0),e.setValue("ISSHOW",s,t)}),e.data.forEach(function(t){var a=0;"judge"==t["STLITEMID.ITEMPROPERTY"]&&(e.data.find(function(e){return e["STLITEMID.GRPID"]==t.ITEMID&&1==e.ISSHOW&&e.ITEMID!=e["STLITEMID.GRPID"]})&&(a=1),e.setValue("ISSHOW",a,t))})}),I()(r,O.M_SETDTS04,function(t){var e=R.getTable("DTS"),a=1;e.data.sort(function(t,e){return parseFloat(t["STLITEMID.ENTRYNUM"])-parseFloat(e["STLITEMID.ENTRYNUM"])}).forEach(function(t){e.setValue("ENTRYNUM","",t),1==t.ISSHOW&&e.setValue("ENTRYNUM",a++,t)})}),I()(r,O.M_SETDTS05,function(t){var e=R.getTable("DTS");e.data.forEach(function(t){var a="";a="1"==t.ISDELBYU?"":t.AMT||t["STLITEMID.DEFAULTVALUE"],t.DEALTYPE,e.setValue("AMT",a,t)})}),I()(r,O.M_SETAMT,function(t){var e=R.getTable("MAIN"),a=R.getTable("DTS");a.data.filter(function(t){return""!=t["STLITEMID.CFORMULA"]}).sort(function(t,e){}).forEach(function(t){var e=Object(N.a)(t["ITEMID.PARANAME"],function(t){var e=a.data.find(function(e){return e["ITEMID.PARANAME"]==t});if(e)return e["STLITEMID.CFORMULA"]},function(t){var e=a.data.find(function(e){return e["ITEMID.PARANAME"]==t});return e&&e.AMT||0});a.setValue("AMT",e,t)});var r={OFFLINEAMT:107070,ONLINEAMT:107069,DIFFAMT:107064,CALAMT:107063};S()(r).forEach(function(t){var s=a.data.find(function(e){return e.ITEMID==r[t]}),n=(s||{}).AMT||0;e.setValue(t,n,s)});var s=e.getValue("OFFLINEAMT"),n=e.getValue("ONLINEAMT"),i=e.getValue("DIFFAMT"),o=parseFloat((parseFloat(s)/(parseFloat(s)+parseFloat(n))*100).toFixed("1")),E=parseFloat((parseFloat(n)/(parseFloat(s)+parseFloat(n))*100).toFixed("1")),c=parseFloat((parseFloat(i)/(parseFloat(s)+parseFloat(n))*100).toFixed("1"));e.setValue("OFFLINERATE",o),e.setValue("ONLINERATE",E),e.setValue("DIFFRATE",c)}),I()(r,O.M_SETEMP,function(t,e){var a=e.path,r=e.item,s=R.getTable(a);s.setValue("MANAGERID",r.EMPID),s.setValue("MANAGER",r.EMPNAME)}),I()(r,O.M_SETSNODE,function(t,e){var a=e.path,r=e.item,s=R.getTable(a);s.setValue("SNODEID",r.SNODEID),s.setValue("SNODEID.SNODECODE",r.SNODECODE),s.setValue("SNODEID.SNODENAME",r.SNODENAME)}),I()(r,O.M_SETSETDTS,function(t){var e=R.getTable("DTS"),a=R.getTable("SETDTS");a.initData(),e.data.forEach(function(t){var e={},r=t["STLITEMID.ITEMPROPERTY"],s=t.ISDELBYU;S()(t).forEach(function(a){e[a]=t[a]}),e.DISABLE=!1,e.ISSELECT=!0,"select"==r?"1"==s&&(e.ISSELECT=!1):e.DISABLE=!0,a.add(e)})}),I()(r,O.M_SETDTSISDELBYU,function(){var t=R.getTable("DTS");R.getTable("SETDTS").data.filter(function(t){return 0==t.DISABLE}).forEach(function(e){var a=t.data.find(function(t){return t.ITEMID==e.ITEMID});a&&t.setValue("ISDELBYU",e.ISSELECT?0:1,a)})}),I()(r,O.M_SETREJECTAMT,function(t,e){var a=e.item,r=R.getTable("DTS"),s=a.AMT,n=a["STLITEMID.ISPN"],i=a["STLITEMID.ISZERO"],o=a["STLITEMID.ISNN"];(0==n&&s>0||0==i&&0==s||0==o&&s<0)&&r.setValue("AMT","",a)}),r)),F=(s=T()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new E.a(function(t,a){try{t(e())}catch(t){a(t)}}));case 1:case"end":return t.stop()}},t,this)})),function(t){return s.apply(this,arguments)}),x=f()({},R.mixActions(),{add:function(){var t=T()(i.a.mark(function t(e){e.dispatch;var a,r,s,n,o,E=e.commit,c=e.state;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(function(){});case 2:return E(O.M_INITBYPATH,{paths:["MAIN","DTS"]}),t.next=5,v.a.doLoadSTLFMITE({STLTYPEID:c.params.STLTYPEID,BILLDATE:Object(h.c)(new Date)});case 5:return a=t.sent,E(O.M_INITDATA,{path:"STLFMITEM",data:(a.data||{}).items}),E(O.M_ADDDEFAULT),r=R.getTable("MAIN"),s=r.getValue("SNODEID"),n=r.getValue("STLFMID"),t.next=13,v.a.doLoadCOPYDTS({DSNODEID:s,STLFMID:n});case 13:o=t.sent,E(O.M_INITDATA,{path:"COPYDTS",data:(o.data||{}).items}),E(O.M_SETDTS01),E(O.M_SETDTS02),E(O.M_SETDTS03),E(O.M_SETDTS04),E(O.M_SETDTS05),E(O.M_SETAMT),E(O.M_SETSTATE);case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadCOPYDTS:function(){var t=T()(i.a.mark(function t(e){e.dispatch;var a,r,s,n,o=e.commit;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=R.getTable("MAIN"),r=a.getValue("SNODEID"),s=a.getValue("STLFMID"),t.next=5,v.a.doLoadCOPYDTS({DSNODEID:r,STLFMID:s});case 5:n=t.sent,o(O.M_INITDATA,{path:"COPYDTS",data:(n.data||{}).items}),o(O.M_SETDTS01),o(O.M_SETDTS02),o(O.M_SETDTS03),o(O.M_SETDTS04),o(O.M_SETDTS05),o(O.M_SETAMT);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadSTLFMITE:function(){var t=T()(i.a.mark(function t(e){var a,r,s,n,o=e.dispatch,E=e.commit,c=e.state;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=R.getTable("STLFMITEM"),r=a.getValue("STLFMID"),s=R.getTable("MAIN"),console.log(s),t.next=6,v.a.doLoadSTLFMITE({STLTYPEID:c.params.STLTYPEID,BILLDATE:s.getValue("BILLDATE")});case 6:n=t.sent,E(O.M_INITDATA,{path:"STLFMITEM",data:(n.data||{}).items}),r!=a.getValue("STLFMID")&&o("loadCOPYDTS");case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),setSnode:function(){var t=T()(i.a.mark(function t(e,a){var r=e.dispatch,s=e.commit,n=a.path,o=a.item;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s(O.M_SETSNODE,{path:n,item:o}),t.next=3,r("loadCOPYDTS");case 3:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),setSetDTS:function(t){var e=t.commit;e(O.M_SETDTSISDELBYU),e(O.M_SETDTS03),e(O.M_SETDTS04),e(O.M_SETDTS05),e(O.M_SETAMT)},mySave:function(){var t=T()(i.a.mark(function t(e){var a=e.dispatch;e.commit;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(P);case 2:return t.next=4,a("save");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),setForm:function(t){var e=t.commit,a={};this.getters.userInfo.DSNODEID;a.BILLID="",a.BILLDATE=Object(h.c)(new Date),a.sqlId="51485",a.pageSize="10",a.keyFields="BILLID",L.a.open(a).then(function(t){e(O.M_INITDATA,{path:"QRY",data:(t.data||{}).items})})}}),P=function(){var t=R.getTable("MAIN"),e=R.getTable("DTS"),a=[];Object(N.b)(t.getValue("SNODEID"))&&a.push("经营门店"),Object(N.b)(t.getValue("BILLDATE"))&&a.push("日期"),Object(N.b)(t.getValue("MANAGERID"))&&a.push("店长"),A.a.getters[O.STORE_NAME+"/ISTIME"]||Object(N.b)(t.getValue("DEADTIME"))&&a.push("截止时间");var r=e.data.find(function(t){return"差异"==t["ITEMID.PARANAME"]});r&&(Object(N.b)(r.AMT)||0==r.AMT||Object(N.b)(t.getValue("DIFFREMARK"))&&a.push("差异说明"));var s=[];if(e.data.forEach(function(t){var e=t.AMT,a=t["STLITEMID.ISPN"],r=t["STLITEMID.ISNULLF"],n=t["STLITEMID.ISZERO"],i=t["STLITEMID.ISNN"];0==a&&e>0||0==r&&Object(N.b)(e),0==a&&e>0&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可大于零"),0==r&&Object(N.b)(e)&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可为空"),0==n&&"0"==e&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可为零"),0==i&&e<0&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可小于零")}),a.length>0||s.length>0){if(a.length>0)throw new Error(a.join(",")+" 空,"+s.join(",")+" \n不可保存");throw new Error(s.join(",")+" \n不可保存")}};A.a.registerModule(O.STORE_NAME,{namespaced:!0,state:g,getters:{ISTIME:function(t){return"109304"==t.params.BILLTYPEID},ISSHOWSAVE:function(t,e,a,r){return("Add"==t.STATE||"ToVerify"==t.STATE)&&r.pcode[e.ISTIME?"jiesuan-fsjs-submit":"jiesuan-rijs-submit"]},ISSHOWDELETE:function(t,e,a,r){return"ToVerify"==t.STATE&&r.pcode[e.ISTIME?"jiesuan-fsjs-delete":"jiesuan-rijs-delete"]},ISSHOWCHECK:function(t,e,a,r){return"ToVerify"==t.STATE&&r.pcode[e.ISTIME?"jiesuan-fsjs-verify":"jiesuan-rijs-verify"]},ISSHOWRECHECK:function(t,e,a,r){return t.STATE==(e.ISTIME?"Verified":"ToTally")&&r.pcode[e.ISTIME?"jiesuan-fsjs-reverify":"jiesuan-rijs-reverify"]}},mutations:b,actions:x});var y=function(t,e,a){return R.mapGetters(t,e,a)}},HlNc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),s=a.n(r),n=a("J0Oq"),i=a.n(n),o=a("4YfN"),E=a.n(o),c=a("C5Tr"),T=a("JIbx"),u={props:{item:Object},computed:E()({},Object(c.b)("DTS",["ITEMID","STLITEMID_GRPID","AMT","STLITEMID_PARANAME","ITEMID_PARANAME","ISSHOW","DEALTYPE","STLITEMID_ISLBSHOW","STLITEMID_ISLBB","STLITEMID_LBCOLOR","STLITEMID_LBUNDERLINE","STLITEMID_PNCOLOR","STLITEMID_ZEROCOLOR","STLITEMID_NNCOLOR","STLITEMID_ISPN","STLITEMID_ISZERO","STLITEMID_ISNULLF","STLITEMID_ISNN"],"item")),watch:{AMT:function(){this.$store.commit(c.a.STORE_NAME+"/setRejectAMT",{item:this.item}),this.$store.commit(c.a.STORE_NAME+"/setAMT")}},filters:{toFixed:function(t,e){if("0"==t||""!=t)return parseFloat(t||0).toFixed(e)}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1==t.ISSHOW?a("rs-list-item",{class:{"rr-border":"LongBlack"==t.STLITEMID_LBUNDERLINE},attrs:{noborder:""}},[a("div",{staticClass:"rs-flex-row"},[1==t.STLITEMID_ISLBSHOW?a("div",{staticClass:"rr-width-5em",class:{"rr-weight":1==t.STLITEMID_ISLBB},style:{color:t.STLITEMID_LBCOLOR}},[t._v("\n      "+t._s(t.ITEMID_PARANAME)+"\n    ")]):t._e(),t._v(" "),a("div",{staticClass:"rs-flex-item rr-text-right",class:{"rr-line-b":"ShortGrey"==t.STLITEMID_LBUNDERLINE},style:{color:parseFloat(t.AMT)>0?t.STLITEMID_PNCOLOR:parseFloat(t.AMT)<0?t.STLITEMID_NNCOLOR:t.STLITEMID_ZEROCOLOR}},["Count"==t.DEALTYPE?a("div",[t._v(t._s(t._f("toFixed")(t.AMT,2)))]):t._e(),t._v(" "),"Write"==t.DEALTYPE?a("rs-numInput",{staticClass:"rs-flex-item",attrs:{height:"24",size:"14",text:t._f("toFixed")(t.AMT,2)},model:{value:t.AMT,callback:function(e){t.AMT=e},expression:"AMT"}}):t._e()],1)])]):t._e()},staticRenderFns:[]};var l={props:{},name:"jiesuan",data:function(){return{ISINPUTSHOW:!1}},components:{main_dts:a("C7Lr")(u,I,!1,function(t){a("u2rC")},"data-v-7e6926f6",null).exports},computed:E()({},Object(c.c)(["ISSHOWSAVE","ISSHOWDELETE","TITLE","ISTIME"]),Object(c.b)("MAIN",["BILLTYPEID","BILLDATE","BILLCODE","SNODEID.SNODECODE","SNODEID.SNODENAME","MANAGER","DIFFREMARK","MAKER","VERIFIER","MAKEDATE","VERIFYDATE","TALLIER","TALLYDATE","FHOUR","FMINUTE","DEADLINE"]),Object(c.b)("DTS",[])),methods:{linkUrl:function(t){this.$router.push({path:"/jiesuan1/add/"+t})},open:function(t){this.$refs[t].open()},handleChangeD:function(){this.$callAction({action:c.a.STORE_NAME+"/loadSTLFMITE"})},save:function(){this.$callAction({action:c.a.STORE_NAME+"/mySave",successText:"保存成功"})},del:function(){var t=this;return i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("确认删除？");case 2:t.$callAction({action:c.a.STORE_NAME+"/delete",successText:"删除成功",isSuccessBack:!0});case 3:case"end":return e.stop()}},e,t)}))()}},watch:{DEADLINE:function(){this.$store.commit(c.a.STORE_NAME+"/"+c.a.M_SETDEADLINE)}},activated:function(){console.log("%c"+this.$route.path,"color:red")},filters:{getWeek:function(t){return t?t+" "+Object(T.e)(t):""}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-layout mui-layout-top"},[a("rs-header",{attrs:{title:t.TITLE,color:"primary"}},[a("a",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"}),t._v(" "),a("div",{attrs:{slot:"right"},slot:"right"},[t.ISSHOWDELETE?a("rs-button",{attrs:{link:""},on:{click:t.del}},[t._v("删除")]):t._e(),t._v(" "),t.ISSHOWSAVE?a("rs-button",{attrs:{link:""},on:{click:t.save}},[t._v("保存")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"mui-content"},[a("rs-list",{staticClass:"rr-line-24",attrs:{size:"15",noborder:""}},[a("rs-list-item",{attrs:{noborder:"",isright:""},nativeOn:{click:function(e){t.linkUrl("snodesel")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("经营门店")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-line-b"},[t._v("\n                "+t._s(this["SNODEID.SNODECODE"])+" "+t._s(this["SNODEID.SNODENAME"])+"\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:"",isright:""},nativeOn:{click:function(e){t.linkUrl("empsel")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("店长")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-line-b"},[t._v("\n                "+t._s(t.MANAGER)+" \n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:"",isright:""},nativeOn:{click:function(e){t.open("picker2")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("日 期")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item",class:t.ISTIME?"rr-line-b":""},[t._v("\n                "+t._s(t._f("getWeek")(t.BILLDATE))+"\n            ")])])]),t._v(" "),t.ISTIME?a("rs-list-item",{attrs:{noborder:"",isright:""},nativeOn:{click:function(e){t.open("picker1")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("截止时间")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                "+t._s(t.DEADLINE)+"\n            ")])])]):t._e()],1),t._v(" "),a("rs-datetime",{key:"jiesuan1.1",ref:"picker2",attrs:{type:"date"},on:{confirm:t.handleChangeD},model:{value:t.BILLDATE,callback:function(e){t.BILLDATE=e},expression:"BILLDATE"}}),t._v(" "),t.ISTIME?a("rs-datetime",{key:"jiesuan1.2",ref:"picker1",attrs:{type:"time"},model:{value:t.DEADLINE,callback:function(e){t.DEADLINE=e},expression:"DEADLINE"}}):t._e(),t._v(" "),a("div",{staticClass:"rr-text-right"},[a("rs-button",{attrs:{link:""},nativeOn:{click:function(e){t.linkUrl("set")}}},[t._v("设置项目")])],1),t._v(" "),a("rs-list",{attrs:{size:"14",noborder:""}},t._l(t.DTS,function(t){return a("main_dts",{key:t.ENTRYID,attrs:{item:t}})})),t._v(" "),t.ISTIME?t._e():a("div",{staticClass:"rr-list-textarea"},[a("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.DIFFREMARK,expression:"DIFFREMARK",modifiers:{lazy:!0}}],attrs:{rows:"3",placeholder:"差异说明"},domProps:{value:t.DIFFREMARK},on:{change:function(e){t.DIFFREMARK=e.target.value}}})]),t._v(" "),a("div",{staticClass:"rr-bill-top"},[""!=t.BILLCODE?a("div",{staticClass:"rs-flex-row",staticStyle:{height:"33px"}},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("单据号")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                  "+t._s(t.BILLCODE)+"\n              ")])]):t._e(),t._v(" "),""!=t.MAKER?a("div",{staticClass:"rs-flex-row",staticStyle:{height:"33px"}},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("制 单")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                  "+t._s(t.MAKER)+" "+t._s(t.MAKEDATE)+"\n              ")])]):t._e(),t._v(" "),""!=t.VERIFIER?a("div",{staticClass:"rs-flex-row",staticStyle:{height:"33px"}},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("审 核")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                   "+t._s(t.VERIFIER)+" "+t._s(t.VERIFYDATE)+"\n              ")])]):t._e(),t._v(" "),""!=t.TALLIER?a("div",{staticClass:"rs-flex-row",staticStyle:{height:"33px"}},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("记 账")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                   "+t._s(t.TALLIER)+" "+t._s(t.TALLYDATE)+"\n              ")])]):t._e()])],1)],1)},staticRenderFns:[]};var D=a("C7Lr")(l,S,!1,function(t){a("mvA2")},"data-v-7570eb7c",null);e.default=D.exports},HtI3:function(t,e){},YTJj:function(t,e,a){"use strict";e.__esModule=!0,e.default=function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}},chtG:function(t,e){},dyPA:function(t,e){},eX0N:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),s=a.n(r),n=a("J0Oq"),i=a.n(n),o=a("+9g/"),E=a("9r/T"),c={name:"emp_sel",props:{refStore:{type:Object},singleOpen:{type:Boolean},TITLE:{type:String}},data:function(){return{list:[],topStatus:"",allLoaded:!1,searchInput:"",query:{},openParam:{}}},methods:{setOpenParam:function(){this.openParam={modalName:"VHR_COMPEMP_EXTSEL3",where:"([EMPNAME] LIKE '%"+this.searchInput+"%' OR [EMPCODE] LIKE '%"+this.searchInput+"%') AND p_ldh_viewparam.SET_INT("+this.$store.state.user.userInfo.COMPID+") = "+this.$store.state.user.userInfo.COMPID+" AND [EMPID] IN (SELECT COLUMN_VALUE FROM TABLE(tss_getpowwhere('EMP','250','2')) UNION ALL SELECT "+(this.$store.state.user.userInfo.EMPID||0)+" FROM DUAL)",orderBy:"[ISEXTOBJ],[COMPRULECODE],[DEPTRULECODE],[POSTRULECODE],[JOBRULECODE],[EMPCODE]",pageSize:25,pageIndex:1}},doQuery:function(){var t=this;this.topStatus="loading",this.allLoaded=!1,this.setOpenParam(),o.a.open(this.openParam).then(function(e){t.list=e.data.items,t.topStatus="",t.$refs.loadmore.onTopLoaded()}).catch(function(e){t.$toast(e)})},doQueryNext:function(){var t=i()(s.a.mark(function t(){var e=this;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.openParam.pageIndex++,this.topStatus="loading",o.a.open(this.openParam).then(function(t){e.topStatus="",t.data.items.forEach(function(t){e.list.push(t)}),e.$refs.loadmore.onBottomLoaded(),0==t.data.items.length&&(e.allLoaded=!0)});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectItem:function(t){var e=this,a={};a.path=this.refStore.path,a.item=t,Object(E.setTimeout)(function(){e.refStore.mutation?e.$store.commit(e.refStore.mutation,a):e.refStore.action?(e.$indicator.open(),e.$store.dispatch(e.refStore.action,a).then(function(){return e.$indicator.close()})):e.$emit("selectItem",t)},600),this.$router.goBack()}},activated:function(){var t=this;Object(E.setTimeout)(function(){t.doQuery()},600)},watch:{topStatus:function(t,e){"loading"==t?this.$indicator.open():this.$indicator.close()}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-layout mui-layout-top"},[a("rs-header",{attrs:{title:t.TITLE,color:"primary"}},[a("a",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"})]),t._v(" "),a("div",{staticClass:"mui-input-row mui-search r-search"},[a("rs-button",{staticClass:"mui-pull-right",attrs:{link:"true"},on:{click:t.doQuery}},[t._v("查询")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"mui-input-clear",staticStyle:{padding:"0 0 0 15px"},attrs:{type:"search",placeholder:"输入编码、姓名"},domProps:{value:t.searchInput},on:{input:function(e){e.target.composing||(t.searchInput=e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"mui-content"},[a("div",{staticClass:"page-loadmore-wrapper"},[a("rs-loadmore",{ref:"loadmore",attrs:{"top-method":t.doQuery,"bottom-method":t.doQueryNext,"auto-fill":!1,"bottom-all-loaded":t.allLoaded,"top-status":t.topStatus},on:{"update:topStatus":function(e){t.topStatus=e}}},[a("ul",{staticClass:"mui-table-view"},t._l(t.list,function(e){return a("li",{key:e.EMPID,staticClass:"mui-table-view-cell",staticStyle:{"font-size":"15px"},on:{click:function(a){t.selectItem(e)}}},[a("label",{staticStyle:{width:"80px",display:"inline-block"}},[t._v(t._s(e.EMPCODE))]),t._v(t._s(e.EMPNAME)+"\n          ")])})),t._v(" "),t.allLoaded?a("div",{staticClass:"rs-list-nodata"},[a("span",[t._v("没有数据啦")])]):t._e()])],1)])],1)},staticRenderFns:[]};var u=a("C7Lr")(c,T,!1,function(t){a("DnmN")},"data-v-2e5dec00",null);e.default=u.exports},gasv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),s=a.n(r),n=a("J0Oq"),i=a.n(n),o=a("4YfN"),E=a.n(o),c=a("FYzL"),T=a("JIbx"),u={props:{TITLE:""},name:"jiesuan",data:function(){return{ISINPUTSHOW:!1,list:[{SNODEID:"10001","SNODEID.SNODENAME":"小木桥店"},{SNODEID:"10002","SNODEID.SNODENAME":"小木桥店2222"}]}},computed:E()({},Object(c.c)(["ISSHOWSAVE","ISSHOWDELETE","ISTIME"]),Object(c.b)("MAIN",["BILLTYPEID","BILLDATE","BILLCODE","SNODEID.SNODECODE","SNODEID.SNODENAME","MANAGER","DIFFREMARK","MAKER","VERIFIER","MAKEDATE","VERIFYDATE","TALLIER","TALLYDATE","FHOUR","FMINUTE","DEADLINE"]),Object(c.b)("DTS",[]),Object(c.b)("QRY",[]),{length:function(){return this.list.length}}),methods:{linkUrl:function(t,e){this.$router.push({path:"/jiesuan1/detail/main",query:{SNODEID:t,index:e,length:this.length}})},open:function(t){this.$refs[t].open()},handleChangeD:function(){this.$callAction({action:c.a.STORE_NAME+"/loadSTLFMITE"})},save:function(){this.$callAction({action:c.a.STORE_NAME+"/mySave",successText:"保存成功"})},del:function(){var t=this;return i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("确认删除？");case 2:t.$callAction({action:c.a.STORE_NAME+"/delete",successText:"删除成功",isSuccessBack:!0});case 3:case"end":return e.stop()}},e,t)}))()}},watch:{DEADLINE:function(){this.$store.commit(c.a.STORE_NAME+"/"+c.a.M_SETDEADLINE)}},activated:function(){console.log("%c"+this.$route.path,"color:red"),this.$store.dispatch(c.a.STORE_NAME+"/setForm")},filters:{getWeek:function(t){return t?t+" "+Object(T.e)(t):""}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-layout mui-layout-top"},[a("rs-header",{attrs:{title:t.TITLE,color:"primary"}},[a("a",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"})]),t._v(" "),a("div",{staticClass:"mui-content bk-fff"},[a("rs-list",{staticClass:"rr-line-24",attrs:{size:"15",noborder:""}},[a("rs-list-item",{attrs:{noborder:"",isright:""},nativeOn:{click:function(e){t.open("picker2")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("日 期")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item rr-line-b"},[t._v("\n                "+t._s(t._f("getWeek")(t.BILLDATE))+"\n            ")])])]),t._v(" "),a("rs-list-item",{attrs:{noborder:"",isright:""},nativeOn:{click:function(e){t.linkUrl("snodesel")}}},[a("div",{staticClass:"rs-flex-row"},[a("span",{staticClass:"rr-justify rr-width-4em"},[t._v("经营门店")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("div",{staticClass:"rs-flex-item"},[t._v("\n                "+t._s(this["QRYSNODEID.SNODECODE"])+" "+t._s(this["QRYSNODEID.SNODENAME"])+"\n            ")])])])],1),t._v(" "),a("rs-datetime",{key:"jiesuan1.1",ref:"picker2",attrs:{type:"date"},on:{confirm:t.handleChangeD},model:{value:t.BILLDATE,callback:function(e){t.BILLDATE=e},expression:"BILLDATE"}}),t._v(" "),a("div",{staticClass:"mui-content-padded"},[a("table",{staticClass:"rr-table"},[t._m(0),t._v(" "),a("tbody",{staticClass:"rr-table-body"},[t._l(t.QRY,function(e,r){return a("tr",{key:r,on:{click:function(a){t.linkUrl(e.SNODEID,r)}}},[a("td",[t._v(t._s(e.SNODENAME)),a("br"),t._v(t._s(e.SNODEID))]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("{item.SNODEID}")]),t._v(" "),t._m(1,!0),t._v(" "),t._m(2,!0),t._v(" "),t._m(3,!0)])}),t._v(" "),t._m(4)],2)])])],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"rr-table-header"},[a("tr",[a("td",[t._v("经营门店")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("实际收入")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("线下"),a("br"),t._v("占比%")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("线上"),a("br"),t._v("占比%")]),t._v(" "),a("td",{staticClass:"rr-table-w4em"},[t._v("差异"),a("br"),t._v("差异%")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"rr-text-right"},[this._v("20"),e("br"),this._v("2.09%")])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"rr-text-right"},[this._v("9"),e("br"),this._v("2.09%")])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"rr-text-right"},[this._v("1.1"),e("br"),this._v("2.09%")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"rr-table-heji"},[a("td",{staticClass:"rr-text-right rr-weight"},[t._v("合计:")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("30.1")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("20"),a("br"),t._v("2.09%")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("9"),a("br"),t._v("2.09%")]),t._v(" "),a("td",{staticClass:"rr-text-right"},[t._v("1.1"),a("br"),t._v("2.09%")])])}]};var l=a("C7Lr")(u,I,!1,function(t){a("nYMy")},"data-v-7ac4c1f6",null);e.default=l.exports},itJA:function(t,e,a){"use strict";var r=a("lC5x"),s=a.n(r),n=a("J0Oq"),i=a.n(n),o=a("a3Yh"),E=a.n(o),c=a("ZLEe"),T=a.n(c),u=a("4YfN"),I=a.n(u),l=a("aA9S"),S=a.n(l),D=a("IcnI"),f=a("9rMa"),M=a("+9g/"),d=a("vNGi");Object(d.f)(M.a);var L,A,_,v,p=function(t,e){return{modalName:"TBV_STLFMITEM",where:"[STLFMID] = (SELECT STLFMID FROM VBV_STLFM_REF WHERE  ISVERIFY = 1 AND STLTYPEID ='"+t+"' AND TO_DATE('"+e+"','YYYY-MM-DD') BETWEEN SDATE AND NVL (EDATE,TO_DATE('2099-12-31','YYYY-MM-DD')))",orderBy:"[ENTRYNUM]",pageSize:1,pageIndex:1}},h=function(t,e){return{modalName:"TBV_SNSTLDTS_M",where:"[BILLID] IN (SELECT * FROM (SELECT BILLID FROM TBV_SNSTL WHERE AID = @AID AND SNODEID = '"+t+"' AND STLFMID = '"+e+"' AND NVL(ISDEL,0) = 0  ORDER BY  BILLDATE DESC,FHOUR DESC,FMINUTE DESC) WHERE  ROWNUM <2  )",orderBy:"",pageSize:1,pageIndex:1}},N={doLoadCOPYDTS:(L=i()(s.a.mark(function t(e){var a=e.DSNODEID,r=e.STLFMID;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M.a.open(h(a,r)));case 1:case"end":return t.stop()}},t,this)})),function(t){return L.apply(this,arguments)}),doLoadSTLFMITE:(A=i()(s.a.mark(function t(e){var a=e.STLTYPEID,r=e.BILLDATE;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M.a.open(p(a,r)));case 1:case"end":return t.stop()}},t,this)})),function(t){return A.apply(this,arguments)}),doLoadSnode:(_=i()(s.a.mark(function t(e){var a=e.SNODEID;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M.a.open({modalName:"TBV_CHAINSND_SEL",where:"[SNODEID] ='"+a+"'",orderBy:"",pageSize:1,pageIndex:1}));case 1:case"end":return t.stop()}},t,this)})),function(t){return _.apply(this,arguments)}),doOpen:d.c,doSave:d.e,doDelete:d.b,doCheck:d.a,doReCheck:d.d},O=a("78rJ"),m=a("JIbx"),C=a("aP4p"),R=a("Et8i");a("44qn");a.d(e,"c",function(){return F}),a.d(e,"b",function(){return Y}),a.d(e,"a",function(){return g});var g=S()({},O.a,{STORE_NAME:"jiesuan",M_ADDDEFAULT:"addDefault",M_SETDTS01:"setDts01",M_SETDTS02:"setDts02",M_SETDTS03:"setDts03",M_SETDTS04:"setDts04",M_SETDTS05:"setDts05",M_SETDTS0502:"setDts0502",M_SETAMT:"setAMT",M_CHECKRANGE:"checkRange",M_SETEMP:"setEmp",M_SETSNODE:"setSnode",M_SETSETDTS:"setSetDTS",M_SETTIME:"setTime",M_SETDTSISDELBYU:"setDTSISDELBYU"}),b=Object(f.a)(g.STORE_NAME),F=(b.mapState,b.mapGetters),x=new O.b({service:N,paths:{MAIN:"TBV_SNSTL_M",DTS:"TBV_SNSTLDTS_M",SETDTS:"TBV_SNSTLDTS_M",STLFMITEM:"TBV_STLFMITEM",COPYDTS:"TBV_SNSTLDTS_M",SNODE:"TBV_CHAINSND_SEL"},MAINPATH:"MAIN",SUBPATH:["DTS"],XULID:"0000051437",OPRTFLOWID:"30307",EMPFILED:"MANAGERID"}),P=I()({params:{ACTION:"",STLTYPEID:"",BILLTYPEID:""}},x.mixState()),y=I()({},x.mixMutations(),(v={},E()(v,g.M_SETPARAMS,function(t,e){t.params=e,"109303"==t.params.BILLTYPEID&&x.setConfig({XULID:"0000051437",OPRTFLOWID:"30307"}),"109304"==t.params.BILLTYPEID&&x.setConfig({XULID:"0000051465",OPRTFLOWID:"30307"})}),E()(v,g.M_ADDDEFAULT,function(t){var e=x.getTable("MAIN"),a=x.getTable("STLFMITEM");e.add({}),e.setValue("AID",this.getters.userInfo.AID),e.setValue("BILLTYPEID",t.params.BILLTYPEID),e.setValue("SNODEID",this.getters.userInfo.DSNODEID),e.setValue("SNODEID.SNODECODE",this.getters.userInfo.DSNODECODE),e.setValue("SNODEID.SNODENAME",this.getters.userInfo.DSNODENAME),e.setValue("MANAGERID",this.getters.userInfo.EMPID),e.setValue("MANAGER",this.getters.userInfo.EMPNAME),e.setValue("BILLDATE",Object(m.c)(new Date)),e.setValue("STLFMID",a.getValue("STLFMID")),e.setValue("STLFMCODE",a.getValue("STLFMCODE")),this.getters[g.STORE_NAME+"/ISTIME"]&&e.setValue("DEADLINE",Object(m.d)(new Date))}),E()(v,g.M_SETDTS01,function(t){var e=x.getTable("MAIN"),a=x.getTable("STLFMITEM"),r=x.getTable("DTS");r.clear(),a.data.forEach(function(t){var e={};e.ITEMID=t.ITEMID,e["ITEMID.PARANAME"]=t["ITEMID.PARANAME"],e.STLITEMID=t.STLITEMID,T()(t).forEach(function(a){e["STLITEMID."+a]=t[a]}),e.DEALTYPE=t.DEALTYPE,r.add(e)});var s=e.getValue("SNODEID.ISREADSTL");r.data.map(function(t){"EDI"==t.DEALTYPE&&("1"!=s?r.setValue("DEALTYPE","Write",t):r.setValue("DEALTYPE","EDI",t))})}),E()(v,g.M_SETDTS02,function(t){var e=x.getTable("COPYDTS"),a=x.getTable("DTS");a.data.forEach(function(t){if(a.setValue("ISDELBYU",0,t),"select"==t["STLITEMID.ITEMPROPERTY"]){var r=e.data.find(function(e){return e.STLITEMID==t.STLITEMID});r&&a.setValue("ISDELBYU",r.ISDELBYU,t)}})}),E()(v,g.M_SETDTS03,function(t){var e=x.getTable("DTS");e.data.forEach(function(t){var a=t["STLITEMID.ITEMPROPERTY"],r=t.ISDELBYU,s=1;"fixed"==a&&(s=1),"select"==a&&"1"==r&&(s=0),"hide"==a&&(s=0),e.setValue("ISSHOW",s,t)}),e.data.forEach(function(t){var a=0;"judge"==t["STLITEMID.ITEMPROPERTY"]&&(e.data.find(function(e){return e["STLITEMID.GRPID"]==t.ITEMID&&1==e.ISSHOW&&e.ITEMID!=e["STLITEMID.GRPID"]})&&(a=1),e.setValue("ISSHOW",a,t))})}),E()(v,g.M_SETDTS04,function(t){var e=x.getTable("DTS"),a=1;e.data.sort(function(t,e){return parseFloat(t["STLITEMID.ENTRYNUM"])-parseFloat(e["STLITEMID.ENTRYNUM"])}).forEach(function(t){e.setValue("ENTRYNUM","",t),1==t.ISSHOW&&e.setValue("ENTRYNUM",a++,t)})}),E()(v,g.M_SETDTS05,function(t){var e=x.getTable("DTS");e.data.forEach(function(t){var a="";a="1"==t.ISDELBYU?"":t.AMT||t["STLITEMID.DEFAULTVALUE"],t.DEALTYPE,e.setValue("AMT",a,t)})}),E()(v,g.M_SETDTS0502,function(t){var e=x.getTable("DTS");x.getTable("SETDTS").data.filter(function(t){return 0==t.DISABLE}).forEach(function(t){var a=e.data.find(function(e){return e.ITEMID==t.ITEMID});a&&(t.ISSELECT||e.setValue("AMT","",a))})}),E()(v,g.M_SETAMT,function(t){var e=x.getTable("MAIN"),a=x.getTable("DTS");a.data.filter(function(t){return""!=t["STLITEMID.CFORMULA"]}).sort(function(t,e){}).forEach(function(t){var e=Object(C.a)(t["ITEMID.PARANAME"],function(t){var e=a.data.find(function(e){return e["ITEMID.PARANAME"]==t});if(e)return e["STLITEMID.CFORMULA"]},function(t){var e=a.data.find(function(e){return e["ITEMID.PARANAME"]==t});return e&&e.AMT||0});a.setValue("AMT",e,t),"1"==t["STLITEMID.ISZERO"]&&"0"==t["STLITEMID.ISNULLF"]?a.setValue("AMT",e,t):a.setValue("AMT",0!=e?e:"",t)});var r={OFFLINEAMT:107070,ONLINEAMT:107069,DIFFAMT:107064,FACTAMT:107063,CALAMT:107062};T()(r).forEach(function(t){var s=(a.data.find(function(e){return e.ITEMID==r[t]})||{}).AMT||"";e.setValue(t,s)});var s=e.getValue("OFFLINEAMT"),n=e.getValue("ONLINEAMT"),i=e.getValue("DIFFAMT"),o=parseFloat((parseFloat(s)/(parseFloat(s)+parseFloat(n))*100).toFixed("1")),E=parseFloat((parseFloat(n)/(parseFloat(s)+parseFloat(n))*100).toFixed("1")),c=parseFloat((parseFloat(i)/(parseFloat(s)+parseFloat(n))*1e3).toFixed("1"));e.setValue("OFFLINERATE",o),e.setValue("ONLINERATE",E),e.setValue("DIFFRATE",c)}),E()(v,g.M_CHECKRANGE,function(t,e){var a=e.item,r=x.getTable("DTS"),s=a.AMT,n=a["STLITEMID.ISPN"],i=a["STLITEMID.ISZERO"],o=a["STLITEMID.ISNN"];(0==n&&s>0||0==i&&0==s||0==o&&s<0)&&r.setValue("AMT","",a)}),E()(v,g.M_SETEMP,function(t,e){var a=e.path,r=e.item,s=x.getTable(a);s.setValue("MANAGERID",r.EMPID),s.setValue("MANAGER",r.EMPNAME)}),E()(v,g.M_SETSNODE,function(t,e){var a=e.path,r=e.item,s=x.getTable(a);s.setValue("SNODEID",r.SNODEID),s.setValue("SNODEID.SNODECODE",r.SNODECODE),s.setValue("SNODEID.SNODENAME",r.SNODENAME),s.setValue("SNODEID.ISREADSTL",r.ISREADSTL)}),E()(v,g.M_SETTIME,function(t){var e=x.getTable("MAIN"),a=e.getValue("DEADLINE");a&&(e.setValue("FHOUR",a.split(":")[0]),e.setValue("FMINUTE",a.split(":")[1]))}),E()(v,g.M_SETSETDTS,function(t){var e=x.getTable("DTS"),a=x.getTable("SETDTS");a.initData(),e.data.forEach(function(t){var e={},r=t["STLITEMID.ITEMPROPERTY"],s=t.ISDELBYU;T()(t).forEach(function(a){e[a]=t[a]}),e.DISABLE=!1,e.ISSELECT=!0,"select"==r?"1"==s&&(e.ISSELECT=!1):e.DISABLE=!0,a.add(e)})}),E()(v,g.M_SETDTSISDELBYU,function(){var t=x.getTable("DTS");x.getTable("SETDTS").data.filter(function(t){return 0==t.DISABLE}).forEach(function(e){var a=t.data.find(function(t){return t.ITEMID==e.ITEMID});a&&t.setValue("ISDELBYU",e.ISSELECT?0:1,a)})}),v)),V=I()({},x.mixActions(),{add:function(){var t=i()(s.a.mark(function t(e){e.dispatch;var a,r,n,i,o,E=e.commit,c=e.state;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.a)(function(){});case 2:return E(g.M_INITBYPATH,{paths:["MAIN","DTS"]}),t.next=5,N.doLoadSTLFMITE({STLTYPEID:c.params.STLTYPEID,BILLDATE:Object(m.c)(new Date)});case 5:return a=t.sent,E(g.M_INITDATA,{path:"STLFMITEM",data:(a.data||{}).items}),E(g.M_ADDDEFAULT),r=x.getTable("MAIN"),n=r.getValue("SNODEID"),i=r.getValue("STLFMID"),t.next=13,N.doLoadCOPYDTS({DSNODEID:n,STLFMID:i});case 13:o=t.sent,E(g.M_INITDATA,{path:"COPYDTS",data:(o.data||{}).items}),E(g.M_SETDTS01),E(g.M_SETDTS02),E(g.M_SETDTS03),E(g.M_SETDTS04),E(g.M_SETDTS05),E(g.M_SETAMT),E(g.M_SETSTATE);case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadCOPYDTS:function(){var t=i()(s.a.mark(function t(e){e.dispatch;var a,r,n,i,o=e.commit;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=x.getTable("MAIN"),r=a.getValue("SNODEID"),n=a.getValue("STLFMID"),t.next=5,N.doLoadCOPYDTS({DSNODEID:r,STLFMID:n});case 5:i=t.sent,o(g.M_INITDATA,{path:"COPYDTS",data:(i.data||{}).items}),o(g.M_SETDTS01),o(g.M_SETDTS02),o(g.M_SETDTS03),o(g.M_SETDTS04),o(g.M_SETDTS05),o(g.M_SETAMT);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadSTLFMITE:function(){var t=i()(s.a.mark(function t(e){var a,r,n,i,o=e.dispatch,E=e.commit,c=e.state;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=x.getTable("STLFMITEM"),r=a.getValue("STLFMID"),n=x.getTable("MAIN"),t.next=5,N.doLoadSTLFMITE({STLTYPEID:c.params.STLTYPEID,BILLDATE:n.getValue("BILLDATE")});case 5:i=t.sent,E(g.M_INITDATA,{path:"STLFMITEM",data:(i.data||{}).items}),r!=a.getValue("STLFMID")&&o("loadCOPYDTS");case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),setSnode:function(){var t=i()(s.a.mark(function t(e,a){var r=e.dispatch,n=e.commit,i=a.path,o=a.item;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(g.M_SETSNODE,{path:i,item:o}),r("loadCOPYDTS");case 2:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),setSetDTS:function(t){var e=t.commit;e(g.M_SETDTSISDELBYU),e(g.M_SETDTS03),e(g.M_SETDTS04),e(g.M_SETDTS0502),e(g.M_SETAMT)},list_save:function(){var t=i()(s.a.mark(function t(e){var a=e.dispatch;e.commit;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.a)(B);case 2:return t.next=4,a("save");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}),B=function(){var t=x.getTable("MAIN"),e=x.getTable("DTS"),a=[];if(Object(C.b)(t.getValue("SNODEID"))&&a.push("经营门店"),Object(C.b)(t.getValue("BILLDATE"))&&a.push("日期"),Object(C.b)(t.getValue("MANAGERID"))&&a.push("店长"),"109303"==P.params.BILLTYPEID){var r=e.data.find(function(t){return"差异"==t["ITEMID.PARANAME"]});r&&(Object(C.b)(r.AMT)||0==r.AMT||Object(C.b)(t.getValue("DIFFREMARK"))&&a.push("差异说明"))}else Object(C.b)(t.getValue("FHOUR"))&&a.push("截止时间");var s=[];if(e.data.forEach(function(t){var e=t.AMT,a=t["STLITEMID.ISPN"],r=t["STLITEMID.ISNULLF"],n=t["STLITEMID.ISZERO"],i=t["STLITEMID.ISNN"];0==a&&e>0||0==r&&Object(C.b)(e),0==a&&e>0&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可大于零"),0==r&&Object(C.b)(e)&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可为空"),0==n&&"0"==e&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可为零"),0==i&&e<0&&s.push("\n"+t["ITEMID.PARANAME"]+"金额不可小于零")}),a.length>0||s.length>0){if(a.length>0)throw new Error(a.join(",")+" 空,"+s.join(",")+" \n不可保存");throw new Error(s.join(",")+" \n不可保存")}};D.a.registerModule(g.STORE_NAME,{namespaced:!0,state:P,getters:{TITLE:function(t){return"109304"==t.params.BILLTYPEID?"分时结算":"日结算"},ISTIME:function(t){return"109304"==t.params.BILLTYPEID},ISSHOWSAVE:function(t,e,a,r){return"109304"!=t.params.BILLTYPEID?("Add"==t.STATE||"ToVerify"==t.STATE)&&r.pcode["jiesuan-rijs-submit"]:("Add"==t.STATE||"ToVerify"==t.STATE)&&r.pcode["jiesuan-fsjs-submit"]},ISSHOWDELETE:function(t,e,a,r){return"109304"!=t.params.BILLTYPEID?"ToVerify"==t.STATE&&r.pcode["jiesuan-rijs-delete"]:"ToVerify"==t.STATE&&r.pcode["jiesuan-fsjs-delete"]},ISSHOWCHECK:function(t,e,a,r){return"109304"!=t.params.BILLTYPEID?"ToVerify"==t.STATE&&r.pcode["jiesuan-rijs-verify"]:"ToVerify"==t.STATE&&r.pcode["jiesuan-fsjs-verify"]},ISSHOWRECHECK:function(t,e,a,r){return"109304"!=t.params.BILLTYPEID?"Verified"==t.STATE&&r.pcode["jiesuan-rijs-reverify"]:"Verified"==t.STATE&&r.pcode["jiesuan-fsjs-reverify"]}},mutations:y,actions:V});var Y=function(t,e,a){return x.mapGetters(t,e,a)}},l7V2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("4YfN"),s=a.n(r),n=a("C5Tr"),i={props:{TITLE:""},name:"set",data:function(){return{ISXZ:!0}},computed:s()({},Object(n.b)("SETDTS",["ITEMID_PARANAME","ISDELBYU"])),methods:{set:function(){this.$store.dispatch(n.a.STORE_NAME+"/setSetDTS"),this.$router.goBack()}},activated:function(){console.log("%c"+this.$route.path,"color:red"),this.$store.commit(n.a.STORE_NAME+"/setSetDTS")}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-layout mui-layout-top"},[a("rs-header",{attrs:{title:t.TITLE,color:"primary"}},[a("a",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"}),t._v(" "),a("div",{attrs:{slot:"right"},slot:"right"},[a("rs-button",{attrs:{link:""},on:{click:t.set}},[t._v("设置")])],1)]),t._v(" "),a("rs-list",{attrs:{size:"14",noborder:""}},[a("rs-list-item",{attrs:{noborder:""}},[t._v("\n            仅显示选择项\n            "),a("div",{staticClass:"mui-switch",class:{"mui-active":t.ISXZ},on:{click:function(e){t.ISXZ=!t.ISXZ}}},[a("div",{staticClass:"mui-switch-handle"})])])],1),t._v(" "),a("div",{staticClass:"mui-content"},[a("rs-list",{attrs:{size:"14",noborder:""}},t._l(t.SETDTS,function(e){return t.ISXZ&&e.DISABLE?t._e():a("rs-list-item",{key:e.ITEMID,staticClass:"mui-checkbox mui-left",attrs:{noborder:""},nativeOn:{click:function(t){e.ISSELECT=e.DISABLE||!e.ISSELECT}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ISSELECT,expression:"item.ISSELECT"}],attrs:{name:"checkbox",type:"checkbox",disabled:e.DISABLE},domProps:{checked:Array.isArray(e.ISSELECT)?t._i(e.ISSELECT,null)>-1:e.ISSELECT},on:{change:function(a){var r=e.ISSELECT,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=t._i(r,null);s.checked?i<0&&t.$set(e,"ISSELECT",r.concat([null])):i>-1&&t.$set(e,"ISSELECT",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(e,"ISSELECT",n)}}}),a("span",[t._v(t._s(e["ITEMID.PARANAME"]))])])}))],1)],1)},staticRenderFns:[]};var E=a("C7Lr")(i,o,!1,function(t){a("x31K")},null,null);e.default=E.exports},lGY5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("4YfN"),s=a.n(r),n=a("itJA"),i={props:{TITLE:""},name:"set",data:function(){return{ISXZ:!0}},computed:s()({},Object(n.b)("SETDTS",["ITEMID_PARANAME","ISDELBYU"])),methods:{set:function(){this.$store.dispatch("jiesuan/setSetDTS"),this.$router.goBack()}},activated:function(){console.log("%c"+this.$route.path,"color:red"),this.$store.commit("jiesuan/setSetDTS")}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-layout mui-layout-top"},[a("rs-header",{attrs:{title:t.TITLE,color:"primary"}},[a("a",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"}),t._v(" "),a("div",{attrs:{slot:"right"},slot:"right"},[a("rs-button",{attrs:{link:""},on:{click:t.set}},[t._v("设置")])],1)]),t._v(" "),a("rs-list",{attrs:{size:"14",noborder:""}},[a("rs-list-item",{attrs:{noborder:""}},[t._v("\n            仅显示选择项\n            "),a("div",{staticClass:"mui-switch",class:{"mui-active":t.ISXZ},on:{click:function(e){t.ISXZ=!t.ISXZ}}},[a("div",{staticClass:"mui-switch-handle"})])])],1),t._v(" "),a("div",{staticClass:"mui-content"},[a("rs-list",{attrs:{size:"14",noborder:""}},t._l(t.SETDTS,function(e){return t.ISXZ&&e.DISABLE?t._e():a("rs-list-item",{key:e.ITEMID,staticClass:"mui-checkbox mui-left",attrs:{noborder:""},nativeOn:{click:function(t){e.ISSELECT=e.DISABLE||!e.ISSELECT}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ISSELECT,expression:"item.ISSELECT"}],attrs:{name:"checkbox",type:"checkbox",disabled:e.DISABLE},domProps:{checked:Array.isArray(e.ISSELECT)?t._i(e.ISSELECT,null)>-1:e.ISSELECT},on:{change:function(a){var r=e.ISSELECT,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=t._i(r,null);s.checked?i<0&&t.$set(e,"ISSELECT",r.concat([null])):i>-1&&t.$set(e,"ISSELECT",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(e,"ISSELECT",n)}}}),a("span",[t._v(t._s(e["ITEMID.PARANAME"]))])])}))],1)],1)},staticRenderFns:[]};var E=a("C7Lr")(i,o,!1,function(t){a("scLW")},null,null);e.default=E.exports},mvA2:function(t,e){},nYMy:function(t,e){},scLW:function(t,e){},u2rC:function(t,e){},x31K:function(t,e){},ySEY:function(t,e){},zAJM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("C5Tr"),s={data:function(){return{transitionName:"slide-left"}},activated:function(){console.log(this.$route.path,"color:red"),this.$store.commit(r.a.STORE_NAME+"/setParams",this.$route.query),"ADD"==this.$route.query.ACTION&&this.$callAction({action:r.a.STORE_NAME+"/add",param:this.$route.query,isErrorBack:!0,timeOut:600}),"VIEW"==this.$route.query.ACTION&&this.$callAction({action:r.a.STORE_NAME+"/open",param:this.$route.query.DID,isErrorBack:!0,timeOut:600})},deactivated:function(){this.$destroy()},beforeRouteUpdate:function(t,e,a){var r=this.$router.isBack;this.transitionName=r?"slide-right":"slide-left",this.$router.isBack=!1,a()}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%"}},[e("transition",{attrs:{name:this.transitionName}},[e("keep-alive",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(s,n,!1,function(t){a("ySEY")},null,null);e.default=i.exports}});
//# sourceMappingURL=1.6bcf38330643da0bbb6b.js.map